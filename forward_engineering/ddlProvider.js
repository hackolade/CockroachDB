"use strict";var gt=Object.defineProperty;var n=(o,I)=>gt(o,"name",{value:I,configurable:!0});var H=(o,I)=>()=>(I||o((I={exports:{}}).exports,I),I.exports);var Ue=H((St,he)=>{"use strict";he.exports={number:"numeric",string:"text",date:"date",timestamp:"timestamp",binary:"bytea",boolean:"boolean",document:"jsonb",array:"jsonb",objectId:"uuid",default:"char"}});var Ke=H((ft,Pe)=>{"use strict";Pe.exports={char:{size:1},varchar:{mode:"varying"},text:{mode:"text"},bit:{size:1,mode:"bit"},varbit:{size:1,mode:"varying"},tsvector:{mode:"text"},tsquery:{mode:"text"},smallint:{capacity:2},integer:{capacity:4},bigint:{capacity:8},numeric:{capacity:12,mode:"decimal"},real:{capacity:4,mode:"floating"},"double precision":{capacity:8,mode:"floating"},smallserial:{capacity:2},serial:{capacity:4},bigserial:{capacity:8},money:{capacity:8,mode:"decimal"},bytea:{size:4,mode:"binary"},date:{format:"YYYY-MM-DD"},time:{format:"hh:mm:ss.nnnnnn"},timestamp:{format:"YYYY-MM-DD hh:mm:ss"},interval:{format:"PnYnMnDTnHnMnS"},boolean:{mode:"boolean"},int4range:{mode:"range",modeType:"integer",capacity:4},int8range:{mode:"range",modeType:"integer",capacity:8},numrange:{mode:"range",modeType:"decimal",capacity:12},daterange:{mode:"range",modeType:"date",format:"YYYY-MM-DD"},tsrange:{mode:"range",modeType:"timestamp",format:"YYYY-MM-DD hh:mm:ss"},tstzrange:{mode:"range",modeType:"timestamp",format:"YYYY-MM-DD hh:mm:ss.nnnZ"},int4multirange:{mode:"multirange",modeType:"integer",capacity:4},int8multirange:{mode:"multirange",modeType:"integer",capacity:8},nummultirange:{mode:"multirange",modeType:"decimal",capacity:12},datemultirange:{mode:"multirange",modeType:"date",format:"YYYY-MM-DD"},tsmultirange:{mode:"multirange",modeType:"timestamp",format:"YYYY-MM-DD hh:mm:ss"},tstzmultirange:{mode:"multirange",modeType:"timestamp",format:"YYYY-MM-DD hh:mm:ss.nnnZ"},geometry:{format:"euclidian",mode:"geospatial"},geography:{format:"euclidian",mode:"geospatial"},box2d:{format:"euclidian",mode:"geospatial"},box3d:{format:"euclidian",mode:"geospatial"},geometry_dump:{format:"euclidian",mode:"geospatial"},point:{format:"euclidian",mode:"geospatial"},line:{format:"euclidian",mode:"geospatial"},lseg:{format:"euclidian",mode:"geospatial"},box:{format:"euclidian",mode:"geospatial"},path:{format:"euclidian",mode:"geospatial"},polygon:{format:"euclidian",mode:"geospatial"},circle:{format:"euclidian",mode:"geospatial"},inet:{mode:"ip"},cidr:{mode:"ip"},macaddr:{},macaddr8:{},uuid:{mode:"uuid"},oid:{mode:"uuid"},regclass:{},regcollation:{},regconfig:{},regdictionary:{},regnamespace:{},regoper:{},regoperator:{},regproc:{},regprocedure:{},regrole:{},regtype:{},xml:{mode:"xml"},json:{format:"semi-structured"},jsonb:{format:"semi-structured"},int:{},int2:{},int4:{},decimal:{},float:{},composite:{format:"semi-structured",mode:"object"},enum:{mode:"enum"},range_udt:{mode:"range"},domain:{mode:"domain"}}});var Me=H((bt,Fe)=>{"use strict";Fe.exports={createDatabase:"CREATE DATABASE ${name}${template}${encoding}${collate}${characterClassification};\n",createSchema:"CREATE SCHEMA${ifNotExist} ${name};\nSET search_path TO ${name};\n\n${comment}\n",comment:"COMMENT ON ${object} ${objectName} IS ${comment};\n",createTable:"CREATE${temporary} TABLE${ifNotExist} ${name} (\n${columnDefinitions}${keyConstraints}${checkConstraints}${foreignKeyConstraints}\n)${options};\n\n${comment}${columnDescriptions}",createTablePartitionOf:"CREATE${temporary} TABLE${ifNotExist} ${name}\n${partitionOf} ${openParenthesis}${keyConstraints}${checkConstraints}${foreignKeyConstraints}\n${closeParenthesis}${options};\n\n${comment}${columnDescriptions}",generatedColumnClause:" GENERATED ALWAYS AS (${generationExpression}) STORED",columnDefinition:"${name} ${type}${collation}${generatedColumnClause}${primaryKey}${uniqueKey}${defaultValue}${notNull}",checkConstraint:"${name} CHECK (${expression})${notValid}",createForeignKeyConstraint:"${name} FOREIGN KEY (${foreignKey}) REFERENCES ${primaryTable} (${primaryKey})${match}${onDelete}${onUpdate}",createKeyConstraint:"${constraintName}${keyType}${columns}${includeNonKey}${storageParameters}",alterColumnType:"ALTER TABLE IF EXISTS ${tableName} ALTER COLUMN ${columnName} SET DATA TYPE ${dataType};",addNotNullConstraint:"ALTER TABLE IF EXISTS ${tableName} ALTER COLUMN ${columnName} SET NOT NULL;",dropNotNullConstraint:"ALTER TABLE IF EXISTS ${tableName} ALTER COLUMN ${columnName} DROP NOT NULL;",renameColumn:"ALTER TABLE IF EXISTS ${tableName} RENAME COLUMN ${oldColumnName} TO ${newColumnName};",addCheckConstraint:"ALTER TABLE IF EXISTS ${tableName} ADD CONSTRAINT ${constraintName} CHECK (${expression});",dropConstraint:"ALTER TABLE IF EXISTS ${tableName} DROP CONSTRAINT IF EXISTS ${constraintName};",createForeignKey:"ALTER TABLE IF EXISTS ${foreignTable} ADD CONSTRAINT ${name} FOREIGN KEY (${foreignKey}) REFERENCES ${primaryTable}(${primaryKey})${match}${onDelete}${onUpdate};",dropForeignKey:"ALTER TABLE ${tableName} DROP CONSTRAINT ${fkConstraintName};",addPkConstraint:"ALTER TABLE IF EXISTS ${tableName} ADD ${constraintStatement};",dropTable:"DROP TABLE IF EXISTS ${tableName};",addColumn:"ALTER TABLE IF EXISTS ${tableName} ADD COLUMN IF NOT EXISTS ${columnDefinition};",dropColumn:"ALTER TABLE IF EXISTS ${tableName} DROP COLUMN IF EXISTS ${columnName};",dropDomain:"DROP DOMAIN IF EXISTS ${udtName};",dropType:"DROP TYPE IF EXISTS ${udtName};",alterTypeAddAttribute:"ALTER TYPE ${udtName} ADD ATTRIBUTE ${columnDefinition};",alterTypeDropAttribute:"ALTER TYPE ${udtName} DROP ATTRIBUTE IF EXISTS ${attributeName};",alterTypeRenameAttribute:"ALTER TYPE ${udtName} RENAME ATTRIBUTE ${oldAttributeName} TO ${newAttributeName};",alterTypeChangeAttributeType:"ALTER TYPE ${udtName} ALTER ATTRIBUTE ${attributeName} SET DATA TYPE ${newDataType};",updateCommentOnTable:"COMMENT ON TABLE ${tableName} IS ${comment};",updateCommentOnColumn:"COMMENT ON COLUMN ${columnName} IS ${comment};",updateCommentOnSchema:"COMMENT ON SCHEMA ${schemaName} IS ${comment};",updateCommentOnView:"COMMENT ON VIEW ${viewName} IS ${comment};",createSchemaOnly:"CREATE SCHEMA IF NOT EXISTS ${schemaName};",dropSchema:"DROP SCHEMA IF EXISTS ${schemaName};",index:"CREATE${unique} INDEX${concurrently}${ifNotExist} ${name}\n ON ${tableName}${using}${keys}${options};\n",createView:"CREATE${orReplace}${temporary} VIEW ${name}${withOptions}\nAS ${selectStatement}${checkOption};\n\n${comment}\n",viewSelectStatement:"SELECT ${keys}\n	FROM ${tableName}",dropView:"DROP VIEW IF EXISTS ${viewName};",createFunction:"CREATE${orReplace} FUNCTION ${name}\n	(${parameters})\n	RETURNS ${returnType}\n	LANGUAGE ${language}\n${properties}AS $BODY$\n${definition}\n$BODY$;\n",createProcedure:"CREATE${orReplace} PROCEDURE ${name} (${parameters})\n	LANGUAGE ${language}\nAS $BODY$\n${body}\n$BODY$;\n",createCompositeType:`CREATE TYPE \${name} AS (
	\${columnDefinitions}
);

\${comment}`,createEnumType:"CREATE TYPE ${name} AS ENUM (${values});\n\n${comment}",createRangeType:"CREATE TYPE ${name} AS RANGE (\n	SUBTYPE=${subtype}${options}\n);\n\n${comment}",createDomainType:"CREATE DOMAIN ${name} AS ${underlyingType}${notNull}${collate}${default}${constraints};\n\n${comment}"}});var Ye=H((Lt,Ve)=>{"use strict";var Ne=class Ne{id;constraintName;indexStorageParameters;indexInclude};n(Ne,"AlterCollectionColumnPrimaryKeyOptionDto");var le=Ne,Ae=class Ae{type;isActivated;primaryKey;unique;mode;length;compositeKey;compositePartitionKey;compositePrimaryKey;compositeUniqueKey;primaryKeyOptions;triggerUpdateColumns;compMod;GUID};n(Ae,"AlterCollectionColumnDto");var de=Ae,$e=class $e extends le{compositePrimaryKey};n($e,"AlterCollectionRoleCompModPKDto");var Te=$e,Ce=class Ce{new;old};n(Ce,"AlterCollectionRoleCompModPrimaryKey");var ge=Ce,Oe=class Oe{id;type;collectionName;properties;definitions;isActivated;additionalProperties;memory_optimized;collectionUsers;ifNotExist;on_commit;bucketId;compMod;name;roleType;patternProperties};n(Oe,"AlterCollectionRoleDto");var Ee=Oe,Ie=class Ie{type;isActivated;unique;subtype;properties;compositeKey;compositePartitionKey;compositePrimaryKey;compositeUniqueKey;triggerUpdateColumns;role;GUID};n(Ie,"AlterCollectionDto");var ye=Ie;Ve.exports={AlterCollectionDto:ye,AlterCollectionRoleDto:Ee,AlterCollectionColumnDto:de,AlterCollectionRoleCompModPrimaryKey:ge,AlterCollectionRoleCompModPKDto:Te}});var xe=H((Ut,ve)=>{"use strict";var Et=Object.freeze({ALL:"ALL",ANALYSE:"ANALYSE",ANALYZE:"ANALYZE",AND:"AND",ANY:"ANY",ARRAY:"ARRAY",ASC:"ASC",ASYMMETRIC:"ASYMMETRIC",AUTHORIZATION:"AUTHORIZATION",BINARY:"BINARY",BOTH:"BOTH",CASE:"CASE",CAST:"CAST",CHECK:"CHECK",COLLATE:"COLLATE",COLUMN:"COLUMN",CONCURRENTLY:"CONCURRENTLY",CONSTRAINT:"CONSTRAINT",CREATE:"CREATE",CROSS:"CROSS",CURRENT_CATALOG:"CURRENT_CATALOG",CURRENT_DATE:"CURRENT_DATE",CURRENT_ROLE:"CURRENT_ROLE",CURRENT_SCHEMA:"CURRENT_SCHEMA",CURRENT_TIME:"CURRENT_TIME",CURRENT_TIMESTAMP:"CURRENT_TIMESTAMP",CURRENT_USER:"CURRENT_USER",DEFAULT:"DEFAULT",DEFERRABLE:"DEFERRABLE",DESC:"DESC",DISTINCT:"DISTINCT",DO:"DO",ELSE:"ELSE",END:"END",EXCEPT:"EXCEPT",FALSE:"FALSE",FOR:"FOR",FOREIGN:"FOREIGN",FREEZE:"FREEZE",FROM:"FROM",FULL:"FULL",GRANT:"GRANT",GROUP:"GROUP",HAVING:"HAVING",ILIKE:"ILIKE",IN:"IN",INITIALLY:"INITIALLY",INTERSECT:"INTERSECT",INTO:"INTO",IS:"IS",ISNULL:"ISNULL",JOIN:"JOIN",LATERAL:"LATERAL",LEADING:"LEADING",LEFT:"LEFT",LIKE:"LIKE",LIMIT:"LIMIT",LOCALTIME:"LOCALTIME",LOCALTIMESTAMP:"LOCALTIMESTAMP",NATURAL:"NATURAL",NOT:"NOT",NULL:"NULL",OFFSET:"OFFSET",ON:"ON",ONLY:"ONLY",OR:"OR",ORDER:"ORDER",OUTER:"OUTER",OVERLAPS:"OVERLAPS",PLACING:"PLACING",PRIMARY:"PRIMARY",REFERENCES:"REFERENCES",RETURNING:"RETURNING",RIGHT:"RIGHT",SELECT:"SELECT",SESSION_USER:"SESSION_USER",SIMILAR:"SIMILAR",SOME:"SOME",SYMMETRIC:"SYMMETRIC",TABLE:"TABLE",TABLESAMPLE:"TABLESAMPLE",THEN:"THEN",TO:"TO",TRAILING:"TRAILING",TRUE:"TRUE",UNION:"UNION",UNIQUE:"UNIQUE",USER:"USER",USING:"USING",VARIADIC:"VARIADIC",VERBOSE:"VERBOSE",WHEN:"WHEN",WHERE:"WHERE",WINDOW:"WINDOW",WITH:"WITH"}),yt=Object.values(Et);ve.exports={ReservedWordsAsArray:yt}});var oe=H((Ft,ke)=>{"use strict";var{AlterCollectionDto:Pt,AlterCollectionRoleDto:Kt}=Ye(),{ReservedWordsAsArray:Nt}=xe(),At=/\t|\n|'|\f|\r/gm;ke.exports=o=>{let I=n(r=>o.get(r,"[0].code")||o.get(r,"[0].name",""),"getDbName"),R=n(r=>r&&(r.code||r.collectionName)||"","getEntityName"),c=n(r=>r&&(r.code||r.name)||"","getViewName"),f=n(r=>Object.assign({},o.get(r,"[0]",{}),{name:I(r)}),"getDbData"),b=n(r=>o.get(r,"[0].viewOn"),"getViewOn"),U=n((r,T="	")=>r.split(`
`).map(O=>T+O).join(`
`),"tab"),M=n((r,T)=>Object.keys(r).map(o.toLower).includes(o.toLower(T)),"hasType"),L=n(r=>({...r,...o.omit(r==null?void 0:r.role,"properties")||{}}),"getSchemaOfAlterCollection"),C=n(r=>{var F;let T=R(r),O=(F=r.compMod)==null?void 0:F.keyspaceName;return B(T,O)},"getFullCollectionName"),$=n(r=>Object.entries(r).filter(([T,O])=>!o.isNil(O)).reduce((T,[O,F])=>({...T,[O]:F}),{}),"clean"),y=n(r=>r.every(T=>o.get(T,"isActivated",!0)),"checkAllKeysActivated"),d=n(r=>r.length?r.every(T=>!o.get(T,"isActivated",!0)):!1,"checkAllKeysDeactivated"),a=n((r,T)=>{let O=r.filter(k=>o.get(k,"isActivated",!0)).map(T),F=r.filter(k=>!o.get(k,"isActivated",!0)).map(T);return{activatedItems:O,deactivatedItems:F}},"divideIntoActivatedAndDeactivated"),p=n((r,{isActivated:T,isPartOfLine:O,inlineComment:F="--"})=>r?T!==!1?r:O?"/* "+r+" */":r.includes(`
`)?`/*
`+r+` */
`:F+" "+r:"","commentIfDeactivated"),s=n((r,T="'",O="'")=>{let F=r[0];return r[r.length-1]===T&&F===O?r:`${T}${r}${O}`},"wrap"),u=n((r,T)=>T.some(O=>(r==null?void 0:r.oldField[O])!==(r==null?void 0:r.newField[O])),"checkFieldPropertiesChanged"),i=n(r=>{var k;let T={...r,...o.omit(r==null?void 0:r.role,"properties")||{}},O=R(T),F=(k=T.compMod)==null?void 0:k.keyspaceName;return B(O,F)},"getFullTableName"),V=n((r,T)=>`${i(r)}.${W(T)}`,"getFullColumnName"),N=n(r=>{var k;let T={...r,...o.omit(r==null?void 0:r.role,"properties")||{}},O=c(T),F=(k=T.compMod)==null?void 0:k.keyspaceName;return B(O,F)},"getFullViewName"),S=n(r=>r.code||r.name,"getUdtName"),h=n((r="")=>{let T=r.match(/\d+/);return Number(o.get(T,[0],0))},"getDbVersion"),l=n((r="")=>r.replace(At,T=>`\\${T}`),"prepareComment"),A=n(r=>`E'${l(JSON.stringify(r)).slice(1,-1)}'`,"wrapComment"),K=n(r=>o.map(r,T=>{let O=T.defaultExpression?`DEFAULT ${T.defaultExpression}`:"";return o.trim(`${T.argumentMode} ${T.argumentName||""} ${T.argumentType} ${O}`)}).join(", "),"getFunctionArguments"),B=n((r,T)=>T?`${W(T)}.${W(r)}`:W(r),"getNamePrefixedWithSchemaName"),W=n(r=>/\s|\W/.test(r)||o.includes(Nt,o.toUpper(r))?`"${r}"`:r,"wrapInQuotes"),me=n(({name:r})=>W(r),"columnMapToString"),ue=n((r,T,O,F=me)=>{var t;let k=a(r,F),e=(t=k==null?void 0:k.deactivatedItems)!=null&&t.length?p(k.deactivatedItems.join(", "),{isActivated:!1,isPartOfLine:!0}):"";return!T&&O?" ("+k.activatedItems.join(", ")+e+")":" ("+r.map(F).join(", ")+")"},"getColumnsList"),ie=n(r=>r?r.alias?`${W(r.name)} as ${W(r.alias)}`:W(r.name):"","getKeyWithAlias");return{getDbName:I,getDbData:f,getEntityName:R,getViewName:c,getViewOn:b,tab:U,hasType:M,clean:$,checkAllKeysActivated:y,checkAllKeysDeactivated:d,divideIntoActivatedAndDeactivated:a,commentIfDeactivated:p,wrap:s,checkFieldPropertiesChanged:u,getFullTableName:i,getFullColumnName:V,getFullViewName:N,getUdtName:S,getDbVersion:h,wrapComment:A,getFunctionArguments:K,getNamePrefixedWithSchemaName:B,wrapInQuotes:W,getColumnsList:ue,getViewData:n(r=>Array.isArray(r)?r.reduce((T,O)=>{if(!O.tableName)return T.columns.push(ie(O)),T;let F=`${W(O.dbName)}.${W(O.tableName)}`;return T.tables.includes(F)||T.tables.push(F),T.columns.push({statement:`${F}.${ie(O)}`,isActivated:O.isActivated}),T},{tables:[],columns:[]}):{tables:[],columns:[]},"getViewData"),getSchemaOfAlterCollection:L,getFullCollectionName:C}}});var qe=H((Vt,Be)=>{"use strict";var De=n((o="")=>new RegExp("\\$\\{(.*?)\\}",o),"template"),$t=n(o=>o.match(De("gi"))||[],"getAllTemplates"),Ct=n(o=>(o.match(De("i"))||[])[1],"parseTemplate"),Ot=n((o,I)=>$t(o).reduce((R,c)=>{let f=Ct(c);return R.replace(c,()=>I[f]||I[f]===0?I[f]:"")},o),"assignTemplates");Be.exports=Ot});var we=H((vt,He)=>{"use strict";He.exports=({_:o,commentIfDeactivated:I,checkAllKeysDeactivated:R,assignTemplates:c,wrapInQuotes:f,getColumnsList:b})=>({generateConstraintsString:n((d,a)=>{var i,V;let p=I(((d==null?void 0:d.deactivatedItems)||[]).join(`,
	`),{isActivated:!a,isPartOfLine:!0}),s=(i=d==null?void 0:d.activatedItems)!=null&&i.length?`,
	`+d.activatedItems.join(`,
	`):"",u=(V=d==null?void 0:d.deactivatedItems)!=null&&V.length?`
	`+p:"";return s+u},"generateConstraintsString"),foreignKeysToString:n(d=>{if(Array.isArray(d)){let a=d.filter(u=>o.get(u,"isActivated",!0)).map(u=>f(o.trim(u.name))),p=d.filter(u=>!o.get(u,"isActivated",!0)).map(u=>f(o.trim(u.name))),s=p.length?I(p,{isActivated:!1,isPartOfLine:!0}):"";return a.join(", ")+s}return d},"foreignKeysToString"),foreignActiveKeysToString:n(d=>d.map(a=>o.trim(a.name)).join(", "),"foreignActiveKeysToString"),createKeyConstraint:n((d,a)=>p=>{let s=f(o.trim(p.name)),u=R(p.columns||[]),i=o.isEmpty(p.columns)?"":b(p.columns,u,a),V=p.include.length?` INCLUDE${b(p.include,u,a)}`:"",N=p.storageParameters?` WITH (${p.storageParameters})`:"";return{statement:c(d.createKeyConstraint,{constraintName:p.name?`CONSTRAINT ${s} `:"",keyType:p.keyType,columns:i,includeNonKey:V,storageParameters:N}),isActivated:!u}},"createKeyConstraint"),getConstraintsWarnings:n((d=[])=>o.isEmpty(d)?"":`
	`+d.map(a=>{let p=a.name?` [constraint name: ${a.name}]`:"";return`-- ${a.errorMessage}${p}`}).join(`
	`),"getConstraintsWarnings"),additionalPropertiesForForeignKey:n(d=>{let a=o.get(d,"relationshipOnDelete",""),p=o.get(d,"relationshipOnUpdate",""),s=o.get(d,"relationshipMatch","");return{foreignOnDelete:a,foreignOnUpdate:p,foreignMatch:s}},"additionalPropertiesForForeignKey")})});var We=H((kt,Ge)=>{"use strict";Ge.exports=(o,I)=>{let R=n((s,u)=>Object.entries(s.properties).map(u),"mapProperties"),c=n(s=>s.compositeUniqueKey?!1:!!s.unique,"isUniqueKey"),f=n(s=>{var u,i;return c(s)&&(((u=s.uniqueKeyOptions)==null?void 0:u.length)===1&&!((i=o.first(s.uniqueKeyOptions))!=null&&i.constraintName)||o.isEmpty(s.uniqueKeyOptions))},"isInlineUnique"),b=n(s=>s.compositeUniqueKey||s.compositePrimaryKey?!1:!!s.primaryKey,"isPrimaryKey"),U=n(s=>{var u;return b(s)&&!((u=o.first(s.primaryKeyOptions))!=null&&u.constraintName)},"isInlinePrimaryKey"),M=n(({options:s,columnName:u,isActivated:i,jsonSchema:V,dbVersion:N})=>I({keyType:"UNIQUE",name:s.constraintName,columns:[{name:u,isActivated:i}],include:y(s.indexInclude||[],V),storageParameters:s.indexStorageParameters,comment:s.indexComment}),"hydrateUniqueOptions"),L=n((s,u,i,V)=>I({keyType:"PRIMARY KEY",name:s.constraintName,columns:[{name:u,isActivated:i}],include:y(s.indexInclude||[],V),storageParameters:s.indexStorageParameters,comment:s.indexComment}),"hydratePrimaryKeyOptions"),C=n((s,u)=>Object.keys(u).find(i=>u[i].GUID===s),"findName"),$=n((s,u)=>o.get(Object.values(u).find(i=>i.GUID===s),"isActivated",!0),"checkIfActivated"),y=n((s,u)=>o.map(s,i=>({name:C(i.keyId,u.properties),isActivated:$(i.keyId,u.properties)})),"getKeys"),d=n(s=>Array.isArray(s.primaryKey)?s.primaryKey.map(u=>o.isEmpty(u.compositePrimaryKey)?{name:u.constraintName,errorMessage:"A primary key constraint cannot be created without any primary key selected"}:{...L(u,null,null,s),columns:y(u.compositePrimaryKey,s)}):[],"getCompositePrimaryKeys"),a=n((s,u)=>Array.isArray(s.uniqueKey)?s.uniqueKey.map(i=>o.isEmpty(i.compositeUniqueKey)?{name:i.constraintName,errorMessage:"A unique key constraint cannot be created without any unique key selected"}:{...M({options:i,columnName:null,isActivated:null,jsonSchema:s,dbVersion:u}),columns:y(i.compositeUniqueKey,s)}):[],"getCompositeUniqueKeys");return{getTableKeyConstraints:n((s,u)=>{if(!s.properties)return[];let i=R(s,([N,S])=>{if(!(!b(S)||U(S)))return L(o.first(S.primaryKeyOptions),N,S.isActivated,s)}).filter(Boolean),V=o.flatten(R(s,([N,S])=>!c(S)||f(S)?[]:(S.uniqueKeyOptions||[]).map(h=>M({options:h,columnName:N,isActivated:S.isActivated,jsonSchema:s,dbVersion:u})))).filter(Boolean);return[...i,...d(s),...V,...a(s,u)]},"getTableKeyConstraints"),isInlineUnique:f,isInlinePrimaryKey:U,getKeys:y,hydratePrimaryKeyOptions:L,hydrateUniqueOptions:M}}});var je=H((Bt,Xe)=>{"use strict";Xe.exports=({_:o,templates:I,assignTemplates:R,getFunctionArguments:c,getNamePrefixedWithSchemaName:f,wrapComment:b})=>{let U=n((N,S)=>o.map(S,h=>{let l=h.functionOrReplace?" OR REPLACE":"",A=R(I.createFunction,{name:f(h.name,N),orReplace:l,parameters:c(h.functionArguments),returnType:h.functionReturnsSetOf?`SETOF ${h.functionReturnType}`:h.functionReturnType,language:h.functionLanguage,properties:M(h),definition:h.functionBody}),K=h.functionDescription?R(I.comment,{object:"FUNCTION",objectName:f(h.name,N),comment:b(h.functionDescription)}):"";return[A,K].filter(Boolean).join(`
`)}).join(`
`),"getFunctionsScript"),M=n(N=>{let S=n(h=>h?`	${h}
`:"","wrap");return[{key:"functionWindow",getValue:L},{key:"functionVolatility",getValue:C},{key:"functionLeakProof",getValue:$},{key:"functionNullArgs",getValue:y},{key:"functionSqlSecurity",getValue:d},{key:"functionParallel",getValue:a},{key:"functionExecutionCost",getValue:p},{key:"functionExecutionRows",getValue:s},{key:"functionSupportFunction",getValue:u},{key:"functionConfigurationParameters",getValue:i}].map(h=>S(h.getValue(N[h.key],N))).filter(Boolean).join("")},"getProperties"),L=n((N,S)=>S.language!=="c"||!N?"":"WINDOW","getWindow"),C=n(N=>N,"getVolatility"),$=n(N=>N?"LEAKPROOF":"NOT LEAKPROOF","getLeakProof"),y=n(N=>N,"getNullArgs"),d=n(N=>{if(N)return`SECURITY ${N}`},"getSqlSecurity"),a=n(N=>{if(N)return`PARALLEL ${N}`},"getParallel"),p=n(N=>{if(N)return`COST ${N}`},"getExecutionCost"),s=n((N,S)=>!N||!S.functionReturnsSetOf&&!V(S)?"":`ROWS ${N}`,"getExecutionRows"),u=n(N=>{if(N)return`SUPPORT ${N}`},"getSupportFunction"),i=n(N=>{if(N)return`SET ${N}`},"getConfigurationParameters"),V=n(N=>(N.functionReturnType||"").trim().toUpperCase().startsWith("TABLE"),"isFunctionReturnsTable");return{getFunctionsScript:U}}});var Ze=H((Ht,ze)=>{"use strict";ze.exports=({_:o,templates:I,assignTemplates:R,getFunctionArguments:c,getNamePrefixedWithSchemaName:f})=>({getProceduresScript:n((U,M)=>o.map(M,L=>{let C=L.orReplace?" OR REPLACE":"";return R(I.createProcedure,{name:f(L.name,U),orReplace:C,parameters:c(L.inputArgs),language:L.language,body:L.body})}).join(`
`),"getProceduresScript")})});var Je=H((Gt,Qe)=>{"use strict";Qe.exports=({_:o,getColumnsList:I,checkAllKeysDeactivated:R})=>{let c=n(($,y)=>$?" TEMPORARY":y?" UNLOGGED":"","getTableTemporaryValue"),f=n($=>{let y=n(a=>a?`${a}
`:"","wrap"),d=[{key:"inherits",getValue:L("INHERITS")},{key:"partitionBounds",getValue:L("")},{key:"partitioning",getValue:b},{key:"usingMethod",getValue:L("USING")},{key:"storage_parameter",getValue:C},{key:"on_commit",getValue:M},{key:"selectStatement",getValue:L("AS")}].map(a=>y(a.getValue($[a.key],$))).filter(Boolean).join("");return o.trim(d)?` ${o.trim(d)}`:""},"getTableOptions"),b=n(($,{isActivated:y})=>{if($&&$.partitionMethod){let a=U($,y)+` (${$.partitioning_expression})`;return`PARTITION BY ${$.partitionMethod}${a}`}},"getPartitioning"),U=n(($,y)=>{let d=R($.compositePartitionKey);return I($.compositePartitionKey,d,y)},"getPartitionKeys"),M=n(($,y)=>{if($&&y.temporary)return`ON COMMIT ${$}`},"getOnCommit"),L=n($=>y=>{if(y)return`${$} ${y}`},"getBasicValue"),C=n($=>{if(o.isEmpty($))return"";let y=["ttl_storage_parameters"],d=["id",...y];return o.chain($).toPairs().flatMap(([a,p])=>y.includes(a)?o.toPairs(p):[[a,p]]).reject(([a])=>o.includes(d,a)).map(([a,p])=>{if(!(!p&&p!==0))return`${a}=${p}`}).compact().join(`,
	`).trim().thru(a=>{if(a)return`WITH (
	${a}
)`}).value()},"getStorageParameters");return{getTableTemporaryValue:c,getTableOptions:f}}});var et=H((Xt,_e)=>{"use strict";_e.exports=({_:o,commentIfDeactivated:I,assignTemplates:R,templates:c,getNamePrefixedWithSchemaName:f,wrapComment:b})=>{let U=["composite","enum","range_udt","domain"],M=n((a,p)=>{let s=f(a.name,a.schemaName),u=R(c.comment,{object:"TYPE",objectName:s,comment:b(a.comment)});switch(a.type){case"composite":return R(c.createCompositeType,{name:s,columnDefinitions:o.join(p,`,
	`),comment:a.comment?u:""});case"enum":return R(c.createEnumType,{name:s,values:o.map(a.enum,i=>`'${i}'`).join(", "),comment:a.comment?u:""});case"range_udt":return R(c.createRangeType,{name:s,subtype:a.rangeSubtype,options:C(a),comment:a.comment?u:""});case"domain":{let i=R(c.comment,{object:"DOMAIN",objectName:s,comment:b(a.comment)});return R(c.createDomainType,{name:s,underlyingType:a.underlyingType,notNull:a.nullable?"":" NOT NULL",collate:a.collation?`
	COLLATE ${a.collation}`:"",default:a.default?`
	DEFAULT ${a.default}`:"",constraints:$(a),comment:a.comment?i:""})}default:return""}},"getPlainUdt"),L=n(a=>U.includes(a.type),"isNotPlainType"),C=n(a=>{let p=n(u=>u?`	${u}`:"","wrap"),s=[{key:"operatorClass",getValue:y("SUBTYPE_OPCLASS")},{key:"collation",getValue:y("COLLATION")},{key:"canonicalFunction",getValue:y("CANONICAL")},{key:"subtypeDiffFunction",getValue:y("SUBTYPE_DIFF")},{key:"multiRangeType",getValue:y("MULTIRANGE_TYPE_NAME")}].map(u=>p(u.getValue(a[u.key]))).filter(Boolean).join(`,
`);return o.trim(s)?`,
	`+o.trim(s):""},"getRangeOptions"),$=n(a=>o.map(a.checkConstraints,p=>p.name?`
	CONSTRAINT ${p.name} CHECK (${p.expression})`:`
	CHECK (${p.expression})`).join(""),"getDomainConstraints"),y=n(a=>p=>{if(p)return`${a}=${p}`},"getBasicValue");return{getUserDefinedType:n((a,p)=>I(M(a,p),{isActivated:a.isActivated}),"getUserDefinedType"),isNotPlainType:L}}});var nt=H((zt,tt)=>{"use strict";tt.exports=({_:o,wrapInQuotes:I,checkAllKeysDeactivated:R,getColumnsList:c})=>{let f=n(({name:C,sortOrder:$,nullsOrder:y,opclass:d})=>{let a=$?` ${$}`:"",p=y?` ${y}`:"",s=d?` ${d}`:"";return`${I(C)}${s}${a}${p}`},"mapIndexKey"),b=n((C=[],$)=>{let y=R(C);return c(C,y,$,f)},"getIndexKeys"),U=n((C,$)=>{var S;let y=c(C.include||[],R(C.include||[]),$),d=["btree"],a=C.using_hash&&d.includes(C.index_method)?" USING HASH":"",p=(S=C.include)!=null&&S.length?` INCLUDE ${o.trim(y)}`:"",s=C.partitioning_expression||"",u=M(C),i=u?` WITH (
	${u})`:"",V=C.where?` WHERE ${C.where}`:"",N=C.visibility?` ${C.visibility}`:"";return o.compact([" ",a,p,s,i,V,N]).join(`
`)},"getIndexOptions"),M=n(C=>{let $=["id"];return o.chain(C.index_storage_parameter).toPairs().map(([y,d])=>{if(!($.includes(y)||o.isNil(d)||d===""))return`${y}=${L(d)}`}).compact().join(`,
	`).value()},"getWithOptions"),L=n(C=>o.isBoolean(C)?C?"ON":"OFF":C,"getValue");return{getIndexKeys:b,getIndexOptions:U}}});var at=H((Qt,rt)=>{"use strict";rt.exports=({_:o,assignTemplates:I,templates:R,commentIfDeactivated:c,wrapComment:f,wrapInQuotes:b})=>{let U=n((l,A)=>`${l}(${A})`,"addLength"),M=n((l,A,K)=>o.isNumber(K)?`${l}(${A},${K})`:`${l}(${A})`,"addScalePrecision"),L=n((l,A)=>o.isNumber(A)?`${l}(${A})`:l,"addPrecision"),C=n((l,A)=>A?`${l} ${A}`:l,"addWithTimezone"),$=n(({type:l,typeModifier:A,srid:K})=>{let B=K?`, ${K}`:"";return A&&A!==""?`${l}(${A}${B})`:l},"addTypeModifier"),y=n((l,A)=>{let K=(A==null?void 0:A.map(B=>`[${(B==null?void 0:B.array_size_limit)??""}]`).join("").trim())||"";return`${l}${K}`},"addArrayDecorator"),d=n(l=>["char","varchar","bit","varbit"].includes(l),"canHaveLength"),a=n(l=>["numeric","decimal"].includes(l),"canHavePrecision"),p=n(l=>["time","timestamp"].includes(l),"canHaveTimePrecision"),s=n(l=>["numeric","decimal"].includes(l),"canHaveScale"),u=n(l=>["geography","geometry"].includes(l),"canHaveTypeModifier"),i=n((l,A)=>(d(l)&&o.isNumber(A.length)?l=U(l,A.length):a(l)&&s(l)&&o.isNumber(A.precision)?l=M(l,A.precision,A.scale):a(l)&&o.isNumber(A.precision)?l=L(l,A.precision):u(l)?l=$({type:l,typeModifier:A.typeModifier,srid:A.srid}):p(l)&&(o.isNumber(A.timePrecision)||A.timezone)&&(l=C(L(l,A.timePrecision),A.timezone)),y(l,A.array_type)),"decorateType"),V=n(l=>["char","varchar","text","bit","varbit"].includes(l),"isString"),N=n(l=>["date","time","timestamp","interval"].includes(l),"isDateTime");return{decorateType:i,decorateDefault:n((l,A,K)=>{let B=["current_timestamp","current_user","null"];return(V(l)||N(l))&&!B.includes(o.toLower(A))&&!K?f(A):A},"decorateDefault"),getColumnComments:n((l,A)=>o.chain(A).filter("comment").map(K=>{let B=I(R.comment,{object:"COLUMN",objectName:`${l}.${b(K.name)}`,comment:f(K.comment)});return c(B,K)}).join(`
`).value(),"getColumnComments")}}});var st=H((_t,it)=>{"use strict";var It=Ue(),ot=Ke(),E=Me();it.exports=(o,I,R)=>{let c=R.require("lodash"),{tab:f,commentIfDeactivated:b,checkAllKeysDeactivated:U,divideIntoActivatedAndDeactivated:M,hasType:L,wrap:C,clean:$,wrapComment:y,getFunctionArguments:d,wrapInQuotes:a,getNamePrefixedWithSchemaName:p,getColumnsList:s,getViewData:u}=oe()(c),i=qe(),{generateConstraintsString:V,foreignKeysToString:N,foreignActiveKeysToString:S,createKeyConstraint:h,getConstraintsWarnings:l,additionalPropertiesForForeignKey:A}=we()({_:c,commentIfDeactivated:b,checkAllKeysDeactivated:U,assignTemplates:i,getColumnsList:s,wrapInQuotes:a}),K=We()(c,$),{getFunctionsScript:B}=je()({_:c,templates:E,assignTemplates:i,getFunctionArguments:d,getNamePrefixedWithSchemaName:p,wrapComment:y}),{getProceduresScript:W}=Ze()({_:c,templates:E,assignTemplates:i,getFunctionArguments:d,getNamePrefixedWithSchemaName:p}),{getTableTemporaryValue:me,getTableOptions:ue}=Je()({_:c,checkAllKeysDeactivated:U,getColumnsList:s}),{getUserDefinedType:ie,isNotPlainType:Re}=et()({_:c,commentIfDeactivated:b,assignTemplates:i,templates:E,getNamePrefixedWithSchemaName:p,wrapComment:y}),{getIndexKeys:r,getIndexOptions:T}=nt()({_:c,wrapInQuotes:a,checkAllKeysDeactivated:U,getColumnsList:s}),{decorateType:O,decorateDefault:F,getColumnComments:k}=at()({_:c,wrap:C,assignTemplates:i,templates:E,commentIfDeactivated:b,wrapInQuotes:a,wrapComment:y});return{createDatabase(e){if(!e.databaseName)return"";let{collate:t,characterClassification:m}=e;return i(E.createDatabase,{name:a(e.databaseName),template:e.template?`
	TEMPLATE ${e.template}`:"",encoding:e.encoding?`
	ENCODING = '${e.encoding}'`:"",collate:t?`
	LC_COLLATE = '${e.collate}'`:"",characterClassification:m?`
	LC_CTYPE = '${m}'`:""})},createSchema({schemaName:e,ifNotExist:t,comments:m,udfs:g,procedures:P}){let D=i(E.comment,{object:"SCHEMA",objectName:a(e),comment:y(m)}),x=i(E.createSchema,{name:a(e),ifNotExist:t?" IF NOT EXISTS":"",comment:m?D:""}),Y=B(e,g),q=W(e,P);return c.chain([x,Y,q]).compact().map(c.trim).join(`

`).trim().value()},createTable({name:e,columns:t,checkConstraints:m,foreignKeyConstraints:g,schemaData:P,columnDefinitions:D,keyConstraints:x,inherits:Y,description:q,ifNotExist:G,usingMethod:j,on_commit:v,partitioning:X,storage_parameter:Q,temporary:J,unlogged:Z,selectStatement:_,partitionOf:w,partitionBounds:te},ee){let se=G?" IF NOT EXISTS":"",ae=p(e,P.schemaName),ce=i(E.comment,{object:"TABLE",objectName:ae,comment:y(q)}),z=M(x.filter(({errorMessage:re})=>!re).map(h(E,ee)),re=>re.statement),pe=l(x.filter(({errorMessage:re})=>re)),ne=`${V(z,ee)}${pe}`,Se=w?ne==null?void 0:ne.slice(1):ne,ct=M(g,re=>re.statement),fe=V(ct,ee),mt=`
`+k(ae,D),ut=w?E.createTablePartitionOf:E.createTable,pt=w&&!ne?`
	`:`,
	`,be=c.isEmpty(m)?"":C(c.join(m,`,
	`),pt,""),Le=w&&!Se&&!be&&!fe,lt=Le?"":"(",dt=Le?"":")",Tt=i(ut,{temporary:me(J,Z),ifNotExist:se,name:ae,columnDefinitions:w?"":"	"+c.join(t,`,
	`),keyConstraints:Se,checkConstraints:be,foreignKeyConstraints:fe,options:ue({inherits:Y,partitioning:X,usingMethod:j,on_commit:v,storage_parameter:Q,selectStatement:_,partitionBounds:te}),comment:q?ce:"",partitionOf:w?` PARTITION OF ${w} `:"",columnDescriptions:mt,openParenthesis:lt,closeParenthesis:dt});return b([Tt].map(c.trim).join(`

`).trim()+`
`,{isActivated:ee})},convertColumnDefinition(e){let t=e.nullable?"":" NOT NULL",m=e.primaryKey?" "+h(E,!0)(e.primaryKeyOptions).statement:"",g=e.unique?" "+h(E,!0)(e.uniqueKeyOptions).statement:"",P=e.collationRule?` COLLATE "${e.collationRule}"`:"",D=Array.isArray(e.array_type)&&e.array_type.length>0,x=c.isUndefined(e.default)?"":" DEFAULT "+F(e.type,e.default,D),Y=e.dbVersion>=12&&e.generatedColumn&&e.columnGenerationExpression?i(E.generatedColumnClause,{generationExpression:e.columnGenerationExpression}):"";return b(i(E.columnDefinition,{name:a(e.name),type:O(e.type,e),generatedColumnClause:Y,notNull:t,primaryKey:m,uniqueKey:g,collation:P,defaultValue:x}),{isActivated:e.isActivated})},createIndex(e,t,m,g=!0){let P=t.unique&&t.index_method==="btree",D=a(t.indxName),x=P?" UNIQUE":"",Y=t.concurrently?" CONCURRENTLY":"",q=t.ifNotExist?" IF NOT EXISTS":"",G=t.index_method?` USING ${c.toUpper(t.index_method)}`:"",j=r(t.index_method==="btree"?t.columns:c.map(t.columns,X=>c.omit(X,"sortOrder","nullsOrder")),g),v=T(t,g);return b(i(E.index,{unique:x,concurrently:Y,ifNotExist:q,name:D,using:G,keys:j,options:v,tableName:p(e,t.schemaName)}),{isActivated:t.isActivated})},createCheckConstraint(e){return i(E.checkConstraint,{name:e.name?`CONSTRAINT ${a(e.name)}`:"",expression:c.trim(e.expression).replace(/^\(([\s\S]*)\)$/,"$1"),notValid:e.notValid?" NOT VALID":""})},createForeignKeyConstraint({name:e,foreignKey:t,primaryTable:m,primaryKey:g,primaryTableActivated:P,foreignTableActivated:D,foreignSchemaName:x,primarySchemaName:Y,customProperties:q,isActivated:G},j,v){let X=U(g),Q=U(t),J=!X&&!Q&&P&&D,{foreignOnDelete:Z,foreignOnUpdate:_,foreignMatch:w}=A(q),te=i(E.createForeignKeyConstraint,{primaryTable:p(m,Y||v.schemaName),name:e?`CONSTRAINT ${a(e)}`:"",foreignKey:J?N(t):S(t),primaryKey:J?N(g):S(g),onDelete:Z?` ON DELETE ${Z}`:"",onUpdate:_?` ON UPDATE ${_}`:"",match:w?` MATCH ${w}`:""});return{statement:c.trim(te),isActivated:J&&G}},createForeignKey({name:e,foreignTable:t,foreignKey:m,primaryTable:g,primaryKey:P,primaryTableActivated:D,foreignTableActivated:x,foreignSchemaName:Y,primarySchemaName:q,customProperties:G,isActivated:j},v,X){let Q=U(P),J=U(m),Z=!Q&&!J&&D&&x,{foreignOnDelete:_,foreignOnUpdate:w,foreignMatch:te}=A(G),ee=i(E.createForeignKey,{primaryTable:p(g,q||X.schemaName),foreignTable:p(t,Y||X.schemaName),name:e?a(e):"",foreignKey:Z?N(m):S(m),primaryKey:Z?N(P):S(P),onDelete:_?` ON DELETE ${_}`:"",onUpdate:w?` ON UPDATE ${w}`:"",match:te?` MATCH ${te}`:""});return{statement:c.trim(ee),isActivated:Z&&j}},createView(e,t,m){var ee,se,ae,ce;let g=p(e.name,e.schemaName),P=i(E.comment,{object:"VIEW",objectName:g,comment:y(e.comment)}),x=U(e.keys||[])||!m,{columns:Y,tables:q}=u(e.keys),G=Y.map(z=>z.statement).join(`,
		`);if(!x){let z=M(Y,ne=>ne.statement),pe=z.deactivatedItems.length?b(z.deactivatedItems.join(`,
		`),{isActivated:!1,isPartOfLine:!0}):"";G=z.activatedItems.join(`,
		`)+pe}let j=c.trim(e.selectStatement)?c.trim(f(e.selectStatement)):i(E.viewSelectStatement,{tableName:q.join(", "),keys:G}),v=(ee=e.viewOptions)!=null&&ee.check_option?`check_option=${(se=e.viewOptions)==null?void 0:se.check_option}`:"",X=(ae=e.viewOptions)!=null&&ae.security_barrier?"security_barrier":"",Q=15,{getDbVersion:J}=oe()(c),Z=(ce=e.viewOptions)!=null&&ce.security_invoker&&J(t.dbVersion)>=Q?"security_invoker":"",_=v||X||Z?`
	WITH (${c.compact([v,X,Z]).join(",")})`:"",w=n(z=>z.withCheckOption&&z.checkTestingScope?`
	WITH ${z.checkTestingScope} CHECK OPTION`:z.withCheckOption?`
	WITH CHECK OPTION`:"","getCheckOption");return[b(i(E.createView,{name:g,orReplace:e.orReplace?" OR REPLACE":"",temporary:e.temporary?" TEMPORARY":"",checkOption:w(e),comment:e.comment?P:"",withOptions:_,selectStatement:j}),{isActivated:!x})].map(c.trim).join(`

`).trim()+`
`},dropView(e){let t={viewName:e};return i(E.dropView,t)},createViewIndex(){return""},createUdt(e){let t=c.map(e.properties,this.convertColumnDefinition);return ie(e,t)},getDefaultType(e){return It[e]},getTypesDescriptors(){return ot},hasType(e){return L(ot,e)},hydrateDatabase({modelData:e}){return e=c.get(e,"0",{}),{databaseName:e.database_name,encoding:e.encoding,template:e.template,collate:e.LC_COLLATE,characterClassification:e.LC_CTYPE,dbVersion:e.dbVersion}},hydrateColumn({columnDefinition:e,jsonSchema:t,schemaData:m,definitionJsonSchema:g={},parentJsonSchema:P}){let D=c.includes(["char","varchar","text"],e.type)?t.collationRule:"",x=["time","timestamp"],Y=c.includes(x,e.type)?t.timePrecision:"",q=c.includes(x,e.type)?t.timezone:"",G=e.type==="interval"?t.intervalOptions:"",{getDbVersion:j}=oe()(c),v=j(m.dbVersion),X=c.omit(K.hydratePrimaryKeyOptions(c.first(t.primaryKeyOptions)||{},e.name,e.isActivated,P),"columns"),Q=c.omit(K.hydrateUniqueOptions({options:c.first(t.uniqueKeyOptions)||{},columnName:e.name,isActivated:e.isActivated,jsonSchema:P,dbVersion:v}),"columns");return{name:e.name,type:e.type,primaryKey:K.isInlinePrimaryKey(t),primaryKeyOptions:X,unique:K.isInlineUnique(t),uniqueKeyOptions:Q,nullable:e.nullable,default:e.default,comment:t.refDescription||t.description||g.description,isActivated:e.isActivated,scale:e.scale,precision:e.precision,length:e.length,enum:t.enum,array_type:t.array_type,unit:t.unit,rangeSubtype:t.rangeSubtype,operatorClass:t.operatorClass,collation:t.collation,canonicalFunction:t.canonicalFunction,subtypeDiffFunction:t.subtypeDiffFunction,multiRangeType:t.multiRangeType,schemaName:m.schemaName,underlyingType:t.underlyingType,checkConstraints:t.checkConstraints,typeModifier:t.typeModifier,srid:t.srid,collationRule:D,timePrecision:Y,timezone:q,intervalOptions:G,dbVersion:v,generatedColumn:!!t.generatedColumn,columnGenerationExpression:t.columnGenerationExpression}},hydrateJsonSchemaColumn(e,t){return!e.$ref||c.isEmpty(t)||Re(t)?e:(e=c.omit(e,"$ref"),{...t,...e})},hydrateIndex(e,t,m){return{...e,schemaName:m.schemaName}},hydrateViewIndex(e){return{}},hydrateCheckConstraint(e){return{name:e.chkConstrName,expression:e.constrExpression,notValid:e.notValid}},hydrateSchema(e,t){let m=c.get(t,"modelData.0.dbVersion");return{schemaName:e.name,ifNotExist:e.ifNotExist,comments:e.description,udfs:(t==null?void 0:t.udfs)||[],procedures:(t==null?void 0:t.procedures)||[],dbVersion:m}},hydrateTable({tableData:e,entityData:t,jsonSchema:m}){let g=t[0],P=c.chain(g.inherits).map(({parentTable:v})=>c.get(e,`relatedSchemas[${v}]`,"")).compact().map(v=>v.code||v.collectionName).join(", ").thru(v=>v?`(${v})`:"").value(),D=c.first(g.partitioning)||{},x=K.getKeys(D.compositePartitionKey,m),Y=c.get(e,`relatedSchemas[${g.partitionOf}]`),q=Y?p(Y.collectionName,Y.bucketName):"",{getDbVersion:G}=oe()(c),j=G(c.get(e,"dbData.dbVersion",""));return{...e,partitionOf:q,keyConstraints:K.getTableKeyConstraints(m,j),inherits:P,selectStatement:c.trim(g.selectStatement),partitioning:c.assign({},D,{compositePartitionKey:x}),...c.pick(g,"temporary","unlogged","description","ifNotExist","usingMethod","on_commit","storage_parameter","partitionBounds")}},hydrateViewColumn(e){return{name:e.name,tableName:e.entityName,alias:e.alias,isActivated:e.isActivated,dbName:e.dbName}},hydrateView({viewData:e,entityData:t,relatedSchemas:m}){let g=t[0];return{name:e.name,keys:e.keys,comment:g.description,orReplace:g.orReplace,temporary:g.temporary,recursive:g.recursive,viewOptions:g.viewOptions,selectStatement:g.selectStatement,withCheckOption:g.withCheckOption,checkTestingScope:g.withCheckOption?g.checkTestingScope:"",schemaName:e.schemaData.schemaName}},commentIfDeactivated(e,t,m){return e},alterColumnType(e,t,m,g){let P=m;return g.length?P+=`(${g.length})`:g.precision&&g.scale?P+=`(${g.precision},${g.scale})`:g.precision&&(P+=`(${g.precision})`),i(E.alterColumnType,{tableName:e,columnName:t,dataType:P})},setNotNullConstraint(e,t){return i(E.addNotNullConstraint,{tableName:e,columnName:t})},dropNotNullConstraint(e,t){return i(E.dropNotNullConstraint,{tableName:e,columnName:t})},renameColumn(e,t,m){return i(E.renameColumn,{tableName:e,oldColumnName:t,newColumnName:m})},addCheckConstraint(e,t,m){let g={tableName:e,constraintName:t,expression:m};return i(E.addCheckConstraint,g)},dropConstraint(e,t){let m={tableName:e,constraintName:t};return i(E.dropConstraint,m)},updateTableComment(e,t){let m={tableName:e,comment:t};return i(E.updateCommentOnTable,m)},dropTableComment(e){let t={tableName:e,comment:"NULL"};return i(E.updateCommentOnTable,t)},updateColumnComment(e,t){let m={columnName:e,comment:t};return i(E.updateCommentOnColumn,m)},dropColumnComment(e){let t={columnName:e,comment:"NULL"};return i(E.updateCommentOnColumn,t)},updateSchemaComment(e,t){let m={schemaName:e,comment:t};return i(E.updateCommentOnSchema,m)},dropSchemaComment(e){let t={schemaName:e,comment:"NULL"};return i(E.updateCommentOnSchema,t)},updateViewComment(e,t){let m={viewName:e,comment:t};return i(E.updateCommentOnView,m)},dropViewComment(e){let t={viewName:e,comment:"NULL"};return i(E.updateCommentOnView,t)},createSchemaOnly(e){let t={schemaName:e};return i(E.createSchemaOnly,t)},dropSchema(e){let t={schemaName:e};return i(E.dropSchema,t)},dropTable(e){let t={tableName:e};return i(E.dropTable,t)},addColumn(e,t){let m={tableName:e,columnDefinition:t};return i(E.addColumn,m)},dropColumn(e,t){let m={tableName:e,columnName:t};return i(E.dropColumn,m)},dropDomain(e){let t={udtName:e};return i(E.dropDomain,t)},dropType(e){let t={udtName:e};return i(E.dropType,t)},alterTypeAddAttribute(e,t){let m={udtName:e,columnDefinition:t};return i(E.alterTypeAddAttribute,m)},alterTypeDropAttribute(e,t){let m={udtName:e,attributeName:t};return i(E.alterTypeDropAttribute,m)},alterTypeRenameAttribute(e,t,m){let g={udtName:e,oldAttributeName:t,newAttributeName:m};return i(E.alterTypeRenameAttribute,g)},alterTypeChangeAttributeType(e,t,m){let g={udtName:e,attributeName:t,newDataType:m};return i(E.alterTypeChangeAttributeType,g)},dropForeignKey(e,t){let m={tableName:e,fkConstraintName:t};return i(E.dropForeignKey,m)},createKeyConstraint(e,t,m){let g=h(E,t)(m);return{statement:i(E.addPkConstraint,{constraintStatement:(g.statement||"").trim(),tableName:e}),isActivated:g.isActivated}},dropPkConstraint(e,t){let m={tableName:e,constraintName:t};return i(E.dropConstraint,m)}}}});module.exports=st();
