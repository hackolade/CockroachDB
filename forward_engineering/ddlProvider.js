"use strict";var At=Object.defineProperty;var n=(a,O)=>At(a,"name",{value:O,configurable:!0});var q=(a,O)=>()=>(O||a((O={exports:{}}).exports,O),O.exports);var Pe=q((Pt,Ue)=>{"use strict";Ue.exports={number:"numeric",string:"text",date:"date",timestamp:"timestamp",binary:"bytea",boolean:"boolean",document:"jsonb",array:"jsonb",objectId:"uuid",default:"char"}});var Fe=q((Kt,Ke)=>{"use strict";Ke.exports={char:{size:1},varchar:{mode:"varying"},text:{mode:"text"},bit:{size:1,mode:"bit"},varbit:{size:1,mode:"varying"},tsvector:{mode:"text"},tsquery:{mode:"text"},smallint:{capacity:2},integer:{capacity:4},bigint:{capacity:8},numeric:{capacity:12,mode:"decimal"},real:{capacity:4,mode:"floating"},"double precision":{capacity:8,mode:"floating"},smallserial:{capacity:2},serial:{capacity:4},bigserial:{capacity:8},money:{capacity:8,mode:"decimal"},bytea:{size:4,mode:"binary"},date:{format:"YYYY-MM-DD"},time:{format:"hh:mm:ss.nnnnnn"},timestamp:{format:"YYYY-MM-DD hh:mm:ss"},interval:{format:"PnYnMnDTnHnMnS"},boolean:{mode:"boolean"},int4range:{mode:"range",modeType:"integer",capacity:4},int8range:{mode:"range",modeType:"integer",capacity:8},numrange:{mode:"range",modeType:"decimal",capacity:12},daterange:{mode:"range",modeType:"date",format:"YYYY-MM-DD"},tsrange:{mode:"range",modeType:"timestamp",format:"YYYY-MM-DD hh:mm:ss"},tstzrange:{mode:"range",modeType:"timestamp",format:"YYYY-MM-DD hh:mm:ss.nnnZ"},int4multirange:{mode:"multirange",modeType:"integer",capacity:4},int8multirange:{mode:"multirange",modeType:"integer",capacity:8},nummultirange:{mode:"multirange",modeType:"decimal",capacity:12},datemultirange:{mode:"multirange",modeType:"date",format:"YYYY-MM-DD"},tsmultirange:{mode:"multirange",modeType:"timestamp",format:"YYYY-MM-DD hh:mm:ss"},tstzmultirange:{mode:"multirange",modeType:"timestamp",format:"YYYY-MM-DD hh:mm:ss.nnnZ"},geometry:{format:"euclidian",mode:"geospatial"},geography:{format:"euclidian",mode:"geospatial"},box2d:{format:"euclidian",mode:"geospatial"},box3d:{format:"euclidian",mode:"geospatial"},geometry_dump:{format:"euclidian",mode:"geospatial"},point:{format:"euclidian",mode:"geospatial"},line:{format:"euclidian",mode:"geospatial"},lseg:{format:"euclidian",mode:"geospatial"},box:{format:"euclidian",mode:"geospatial"},path:{format:"euclidian",mode:"geospatial"},polygon:{format:"euclidian",mode:"geospatial"},circle:{format:"euclidian",mode:"geospatial"},inet:{mode:"ip"},cidr:{mode:"ip"},macaddr:{},macaddr8:{},uuid:{mode:"uuid"},oid:{mode:"uuid"},regclass:{},regcollation:{},regconfig:{},regdictionary:{},regnamespace:{},regoper:{},regoperator:{},regproc:{},regprocedure:{},regrole:{},regtype:{},xml:{mode:"xml"},json:{format:"semi-structured"},jsonb:{format:"semi-structured"},int:{},int2:{},int4:{},decimal:{},float:{},composite:{format:"semi-structured",mode:"object"},enum:{mode:"enum"},range_udt:{mode:"range"},domain:{mode:"domain"}}});var Ve=q((Ft,Me)=>{"use strict";Me.exports={createDatabase:"CREATE DATABASE ${name}${template}${encoding}${collate}${characterClassification};\n",createSchema:"CREATE SCHEMA${ifNotExist} ${name};\nSET search_path TO ${name};\n\n${comment}\n",comment:"COMMENT ON ${object} ${objectName} IS ${comment};\n",createTable:"CREATE${temporary} TABLE${ifNotExist} ${name} (\n${columnDefinitions}${keyConstraints}${checkConstraints}${foreignKeyConstraints}\n)${options};\n\n${comment}${columnDescriptions}",createTablePartitionOf:"CREATE${temporary} TABLE${ifNotExist} ${name}\n${partitionOf} ${openParenthesis}${keyConstraints}${checkConstraints}${foreignKeyConstraints}\n${closeParenthesis}${options};\n\n${comment}${columnDescriptions}",generatedColumnClause:" GENERATED ALWAYS AS (${generationExpression}) STORED",columnDefinition:"${name} ${type}${collation}${generatedColumnClause}${primaryKey}${uniqueKey}${defaultValue}${notNull}",checkConstraint:"${name} CHECK (${expression})${notValid}",createForeignKeyConstraint:"${name} FOREIGN KEY (${foreignKey}) REFERENCES ${primaryTable} (${primaryKey})${match}${onDelete}${onUpdate}",createKeyConstraint:"${constraintName}${keyType}${columns}${includeNonKey}${storageParameters}",alterColumnType:"ALTER TABLE IF EXISTS ${tableName} ALTER COLUMN ${columnName} SET DATA TYPE ${dataType};",addNotNullConstraint:"ALTER TABLE IF EXISTS ${tableName} ALTER COLUMN ${columnName} SET NOT NULL;",dropNotNullConstraint:"ALTER TABLE IF EXISTS ${tableName} ALTER COLUMN ${columnName} DROP NOT NULL;",renameColumn:"ALTER TABLE IF EXISTS ${tableName} RENAME COLUMN ${oldColumnName} TO ${newColumnName};",addCheckConstraint:"ALTER TABLE IF EXISTS ${tableName} ADD CONSTRAINT ${constraintName} CHECK (${expression});",dropConstraint:"ALTER TABLE IF EXISTS ${tableName} DROP CONSTRAINT IF EXISTS ${constraintName};",createForeignKey:"ALTER TABLE IF EXISTS ${foreignTable} ADD CONSTRAINT ${name} FOREIGN KEY (${foreignKey}) REFERENCES ${primaryTable}(${primaryKey})${match}${onDelete}${onUpdate};",dropForeignKey:"ALTER TABLE ${tableName} DROP CONSTRAINT ${fkConstraintName};",addPkConstraint:"ALTER TABLE IF EXISTS ${tableName} ADD ${constraintStatement};",dropTable:"DROP TABLE IF EXISTS ${tableName};",addColumn:"ALTER TABLE IF EXISTS ${tableName} ADD COLUMN IF NOT EXISTS ${columnDefinition};",dropColumn:"ALTER TABLE IF EXISTS ${tableName} DROP COLUMN IF EXISTS ${columnName};",dropDomain:"DROP DOMAIN IF EXISTS ${udtName};",dropType:"DROP TYPE IF EXISTS ${udtName};",alterTypeAddAttribute:"ALTER TYPE ${udtName} ADD ATTRIBUTE ${columnDefinition};",alterTypeDropAttribute:"ALTER TYPE ${udtName} DROP ATTRIBUTE IF EXISTS ${attributeName};",alterTypeRenameAttribute:"ALTER TYPE ${udtName} RENAME ATTRIBUTE ${oldAttributeName} TO ${newAttributeName};",alterTypeChangeAttributeType:"ALTER TYPE ${udtName} ALTER ATTRIBUTE ${attributeName} SET DATA TYPE ${newDataType};",updateCommentOnTable:"COMMENT ON TABLE ${tableName} IS ${comment};",updateCommentOnColumn:"COMMENT ON COLUMN ${columnName} IS ${comment};",updateCommentOnSchema:"COMMENT ON SCHEMA ${schemaName} IS ${comment};",updateCommentOnView:"COMMENT ON VIEW ${viewName} IS ${comment};",createSchemaOnly:"CREATE SCHEMA IF NOT EXISTS ${schemaName};",dropSchema:"DROP SCHEMA IF EXISTS ${schemaName};",index:"CREATE${unique} INDEX${concurrently}${ifNotExist} ${name}\n ON ${tableName}${using}${keys}${options};\n",createView:"CREATE${orReplace}${temporary} VIEW ${name}${withOptions}\nAS ${selectStatement}${checkOption};\n\n${comment}\n",viewSelectStatement:"SELECT ${keys}\n	FROM ${tableName}",dropView:"DROP VIEW IF EXISTS ${viewName};",createFunction:"CREATE${orReplace} FUNCTION ${name}\n	(${parameters})\n	RETURNS ${returnType}\n	LANGUAGE ${language}\n${properties}AS $BODY$\n${definition}\n$BODY$;\n",createProcedure:"CREATE${orReplace} PROCEDURE ${name} (${parameters})\n	LANGUAGE ${language}\nAS $BODY$\n${body}\n$BODY$;\n",createCompositeType:`CREATE TYPE \${name} AS (
	\${columnDefinitions}
);

\${comment}`,createEnumType:"CREATE TYPE ${name} AS ENUM (${values});\n\n${comment}",createRangeType:"CREATE TYPE ${name} AS RANGE (\n	SUBTYPE=${subtype}${options}\n);\n\n${comment}",createDomainType:"CREATE DOMAIN ${name} AS ${underlyingType}${notNull}${collate}${default}${constraints};\n\n${comment}"}});var ve=q((Mt,Ye)=>{"use strict";var Ae=class Ae{id;constraintName;indexStorageParameters;indexInclude};n(Ae,"AlterCollectionColumnPrimaryKeyOptionDto");var de=Ae,$e=class $e{type;isActivated;primaryKey;unique;mode;length;compositeKey;compositePartitionKey;compositePrimaryKey;compositeUniqueKey;primaryKeyOptions;triggerUpdateColumns;compMod;GUID};n($e,"AlterCollectionColumnDto");var Te=$e,Ce=class Ce extends de{compositePrimaryKey};n(Ce,"AlterCollectionRoleCompModPKDto");var ge=Ce,Oe=class Oe{new;old};n(Oe,"AlterCollectionRoleCompModPrimaryKey");var Ee=Oe,Ie=class Ie{id;type;collectionName;properties;definitions;isActivated;additionalProperties;memory_optimized;collectionUsers;ifNotExist;on_commit;bucketId;compMod;name;roleType;patternProperties};n(Ie,"AlterCollectionRoleDto");var ye=Ie,Re=class Re{type;isActivated;unique;subtype;properties;compositeKey;compositePartitionKey;compositePrimaryKey;compositeUniqueKey;triggerUpdateColumns;role;GUID};n(Re,"AlterCollectionDto");var Ne=Re;Ye.exports={AlterCollectionDto:Ne,AlterCollectionRoleDto:ye,AlterCollectionColumnDto:Te,AlterCollectionRoleCompModPrimaryKey:Ee,AlterCollectionRoleCompModPKDto:ge}});var ke=q((Yt,xe)=>{"use strict";var $t=Object.freeze({ALL:"ALL",ANALYSE:"ANALYSE",ANALYZE:"ANALYZE",AND:"AND",ANY:"ANY",ARRAY:"ARRAY",ASC:"ASC",ASYMMETRIC:"ASYMMETRIC",AUTHORIZATION:"AUTHORIZATION",BINARY:"BINARY",BOTH:"BOTH",CASE:"CASE",CAST:"CAST",CHECK:"CHECK",COLLATE:"COLLATE",COLUMN:"COLUMN",CONCURRENTLY:"CONCURRENTLY",CONSTRAINT:"CONSTRAINT",CREATE:"CREATE",CROSS:"CROSS",CURRENT_CATALOG:"CURRENT_CATALOG",CURRENT_DATE:"CURRENT_DATE",CURRENT_ROLE:"CURRENT_ROLE",CURRENT_SCHEMA:"CURRENT_SCHEMA",CURRENT_TIME:"CURRENT_TIME",CURRENT_TIMESTAMP:"CURRENT_TIMESTAMP",CURRENT_USER:"CURRENT_USER",DEFAULT:"DEFAULT",DEFERRABLE:"DEFERRABLE",DESC:"DESC",DISTINCT:"DISTINCT",DO:"DO",ELSE:"ELSE",END:"END",EXCEPT:"EXCEPT",FALSE:"FALSE",FOR:"FOR",FOREIGN:"FOREIGN",FREEZE:"FREEZE",FROM:"FROM",FULL:"FULL",GRANT:"GRANT",GROUP:"GROUP",HAVING:"HAVING",ILIKE:"ILIKE",IN:"IN",INITIALLY:"INITIALLY",INTERSECT:"INTERSECT",INTO:"INTO",IS:"IS",ISNULL:"ISNULL",JOIN:"JOIN",LATERAL:"LATERAL",LEADING:"LEADING",LEFT:"LEFT",LIKE:"LIKE",LIMIT:"LIMIT",LOCALTIME:"LOCALTIME",LOCALTIMESTAMP:"LOCALTIMESTAMP",NATURAL:"NATURAL",NOT:"NOT",NULL:"NULL",OFFSET:"OFFSET",ON:"ON",ONLY:"ONLY",OR:"OR",ORDER:"ORDER",OUTER:"OUTER",OVERLAPS:"OVERLAPS",PLACING:"PLACING",PRIMARY:"PRIMARY",REFERENCES:"REFERENCES",RETURNING:"RETURNING",RIGHT:"RIGHT",SELECT:"SELECT",SESSION_USER:"SESSION_USER",SIMILAR:"SIMILAR",SOME:"SOME",SYMMETRIC:"SYMMETRIC",TABLE:"TABLE",TABLESAMPLE:"TABLESAMPLE",THEN:"THEN",TO:"TO",TRAILING:"TRAILING",TRUE:"TRUE",UNION:"UNION",UNIQUE:"UNIQUE",USER:"USER",USING:"USING",VARIADIC:"VARIADIC",VERBOSE:"VERBOSE",WHEN:"WHEN",WHERE:"WHERE",WINDOW:"WINDOW",WITH:"WITH"}),Ct=Object.values($t);xe.exports={ReservedWordsAsArray:Ct}});var oe=q((kt,De)=>{"use strict";var{AlterCollectionDto:vt,AlterCollectionRoleDto:xt}=ve(),{ReservedWordsAsArray:Ot}=ke(),It=/\t|\n|'|\f|\r/gm;De.exports=a=>{let O=n(r=>a.get(r,"[0].code")||a.get(r,"[0].name",""),"getDbName"),I=n(r=>r&&(r.code||r.collectionName)||"","getEntityName"),s=n(r=>r&&(r.code||r.name)||"","getViewName"),f=n(r=>Object.assign({},a.get(r,"[0]",{}),{name:O(r)}),"getDbData"),S=n(r=>a.get(r,"[0].viewOn"),"getViewOn"),b=n((r,T="	")=>r.split(`
`).map(R=>T+R).join(`
`),"tab"),K=n((r,T)=>Object.keys(r).map(a.toLower).includes(a.toLower(T)),"hasType"),h=n(r=>({...r,...a.omit(r==null?void 0:r.role,"properties")||{}}),"getSchemaOfAlterCollection"),C=n(r=>{var F;let T=I(r),R=(F=r.compMod)==null?void 0:F.keyspaceName;return M(T,R)},"getFullCollectionName"),$=n(r=>Object.entries(r).filter(([T,R])=>!a.isNil(R)).reduce((T,[R,F])=>({...T,[R]:F}),{}),"clean"),y=n(r=>r.every(T=>a.get(T,"isActivated",!0)),"checkAllKeysActivated"),d=n(r=>r.length?r.every(T=>!a.get(T,"isActivated",!0)):!1,"checkAllKeysDeactivated"),o=n((r,T)=>{let R=r.filter(D=>a.get(D,"isActivated",!0)).map(T),F=r.filter(D=>!a.get(D,"isActivated",!0)).map(T);return{activatedItems:R,deactivatedItems:F}},"divideIntoActivatedAndDeactivated"),p=n((r,{isActivated:T,isPartOfLine:R,inlineComment:F="--"})=>r?T!==!1?r:R?"/* "+r+" */":r.includes(`
`)?`/*
`+r+` */
`:F+" "+r:"","commentIfDeactivated"),c=n((r,T="'",R="'")=>{let F=r[0];return r[r.length-1]===T&&F===R?r:`${T}${r}${R}`},"wrap"),u=n((r,T)=>T.some(R=>(r==null?void 0:r.oldField[R])!==(r==null?void 0:r.newField[R])),"checkFieldPropertiesChanged"),i=n(r=>{var D;let T={...r,...a.omit(r==null?void 0:r.role,"properties")||{}},R=I(T),F=(D=T.compMod)==null?void 0:D.keyspaceName;return M(R,F)},"getFullTableName"),V=n((r,T)=>`${i(r)}.${W(T)}`,"getFullColumnName"),N=n(r=>{var D;let T={...r,...a.omit(r==null?void 0:r.role,"properties")||{}},R=s(T),F=(D=T.compMod)==null?void 0:D.keyspaceName;return M(R,F)},"getFullViewName"),L=n(r=>r.code||r.name,"getUdtName"),U=n((r="")=>{let T=r.match(/\d+/);return Number(a.get(T,[0],0))},"getDbVersion"),l=n((r="")=>r.replace(It,T=>`\\${T}`),"prepareComment"),A=n(r=>`E'${l(JSON.stringify(r)).slice(1,-1)}'`,"wrapComment"),Y=n(r=>a.map(r,T=>{let R=T.defaultExpression?`DEFAULT ${T.defaultExpression}`:"";return a.trim(`${T.argumentMode} ${T.argumentName||""} ${T.argumentType} ${R}`)}).join(", "),"getFunctionArguments"),M=n((r,T)=>T?`${W(T)}.${W(r)}`:W(r),"getNamePrefixedWithSchemaName"),W=n(r=>/\s|\W/.test(r)||a.includes(Ot,a.toUpper(r))?`"${r}"`:r,"wrapInQuotes"),me=n(({name:r})=>W(r),"columnMapToString"),ue=n((r,T,R,F=me)=>{var e;let D=o(r,F),pe=(e=D==null?void 0:D.deactivatedItems)!=null&&e.length?p(D.deactivatedItems.join(", "),{isActivated:!1,isPartOfLine:!0}):"";return!T&&R?" ("+D.activatedItems.join(", ")+pe+")":" ("+r.map(F).join(", ")+")"},"getColumnsList"),ie=n(r=>r?r.alias?`${W(r.name)} as ${W(r.alias)}`:W(r.name):"","getKeyWithAlias");return{getDbName:O,getDbData:f,getEntityName:I,getViewName:s,getViewOn:S,tab:b,hasType:K,clean:$,checkAllKeysActivated:y,checkAllKeysDeactivated:d,divideIntoActivatedAndDeactivated:o,commentIfDeactivated:p,wrap:c,checkFieldPropertiesChanged:u,getFullTableName:i,getFullColumnName:V,getFullViewName:N,getUdtName:L,getDbVersion:U,wrapComment:A,getFunctionArguments:Y,getNamePrefixedWithSchemaName:M,wrapInQuotes:W,getColumnsList:ue,getViewData:n(r=>Array.isArray(r)?r.reduce((T,R)=>{if(!R.tableName)return T.columns.push(ie(R)),T;let F=`${W(R.dbName)}.${W(R.tableName)}`;return T.tables.includes(F)||T.tables.push(F),T.columns.push({statement:`${F}.${ie(R)}`,isActivated:R.isActivated}),T},{tables:[],columns:[]}):{tables:[],columns:[]},"getViewData"),getSchemaOfAlterCollection:h,getFullCollectionName:C}}});var He=q((Bt,qe)=>{"use strict";var Be=n((a="")=>new RegExp("\\$\\{(.*?)\\}",a),"template"),Rt=n(a=>a.match(Be("gi"))||[],"getAllTemplates"),St=n(a=>(a.match(Be("i"))||[])[1],"parseTemplate"),ft=n((a,O)=>Rt(a).reduce((I,s)=>{let f=St(s);return I.replace(s,()=>O[f]||O[f]===0?O[f]:"")},a),"assignTemplates");qe.exports=ft});var Ge=q((Ht,we)=>{"use strict";var Lt=n(({index:a,numberOfStatements:O,lastIndexOfActivatedStatement:I,delimiter:s})=>{let f=a===O-1,S=a===I;return f?"":S?" --"+s:s},"getDelimiter"),bt=n(({statements:a=[],delimiter:O=",",indent:I=`
`})=>{let s=a.findLastIndex(S=>!S.startsWith("--")),f=a.length;return a.map((S,b)=>{let K=Lt({index:b,numberOfStatements:f,lastIndexOfActivatedStatement:s,delimiter:O});return S+K}).join(I)},"joinActivatedAndDeactivatedStatements");we.exports={joinActivatedAndDeactivatedStatements:bt}});var je=q((Gt,We)=>{"use strict";We.exports=({_:a,commentIfDeactivated:O,checkAllKeysDeactivated:I,assignTemplates:s,wrapInQuotes:f,getColumnsList:S})=>({generateConstraintsString:n((d,o)=>{var i,V;let p=O(((d==null?void 0:d.deactivatedItems)||[]).join(`,
	`),{isActivated:!o,isPartOfLine:!0}),c=(i=d==null?void 0:d.activatedItems)!=null&&i.length?`,
	`+d.activatedItems.join(`,
	`):"",u=(V=d==null?void 0:d.deactivatedItems)!=null&&V.length?`
	`+p:"";return c+u},"generateConstraintsString"),foreignKeysToString:n(d=>{if(Array.isArray(d)){let o=d.filter(u=>a.get(u,"isActivated",!0)).map(u=>f(a.trim(u.name))),p=d.filter(u=>!a.get(u,"isActivated",!0)).map(u=>f(a.trim(u.name))),c=p.length?O(p,{isActivated:!1,isPartOfLine:!0}):"";return o.join(", ")+c}return d},"foreignKeysToString"),foreignActiveKeysToString:n(d=>d.map(o=>a.trim(o.name)).join(", "),"foreignActiveKeysToString"),createKeyConstraint:n((d,o)=>p=>{let c=f(a.trim(p.name)),u=I(p.columns||[]),i=a.isEmpty(p.columns)?"":S(p.columns,u,o),V=p.include.length?` INCLUDE${S(p.include,u,o)}`:"",N=p.storageParameters?` WITH (${p.storageParameters})`:"";return{statement:s(d.createKeyConstraint,{constraintName:p.name?`CONSTRAINT ${c} `:"",keyType:p.keyType,columns:i,includeNonKey:V,storageParameters:N}),isActivated:!u}},"createKeyConstraint"),getConstraintsWarnings:n((d=[])=>a.isEmpty(d)?"":`
	`+d.map(o=>{let p=o.name?` [constraint name: ${o.name}]`:"";return`-- ${o.errorMessage}${p}`}).join(`
	`),"getConstraintsWarnings"),additionalPropertiesForForeignKey:n(d=>{let o=a.get(d,"relationshipOnDelete",""),p=a.get(d,"relationshipOnUpdate",""),c=a.get(d,"relationshipMatch","");return{foreignOnDelete:o,foreignOnUpdate:p,foreignMatch:c}},"additionalPropertiesForForeignKey")})});var ze=q((jt,Xe)=>{"use strict";Xe.exports=(a,O)=>{let I=n((c,u)=>Object.entries(c.properties).map(u),"mapProperties"),s=n(c=>c.compositeUniqueKey?!1:!!c.unique,"isUniqueKey"),f=n(c=>{var u,i;return s(c)&&(((u=c.uniqueKeyOptions)==null?void 0:u.length)===1&&!((i=a.first(c.uniqueKeyOptions))!=null&&i.constraintName)||a.isEmpty(c.uniqueKeyOptions))},"isInlineUnique"),S=n(c=>c.compositeUniqueKey||c.compositePrimaryKey?!1:!!c.primaryKey,"isPrimaryKey"),b=n(c=>{var u;return S(c)&&!((u=a.first(c.primaryKeyOptions))!=null&&u.constraintName)},"isInlinePrimaryKey"),K=n(({options:c,columnName:u,isActivated:i,jsonSchema:V,dbVersion:N})=>O({keyType:"UNIQUE",name:c.constraintName,columns:[{name:u,isActivated:i}],include:y(c.indexInclude||[],V),storageParameters:c.indexStorageParameters,comment:c.indexComment}),"hydrateUniqueOptions"),h=n((c,u,i,V)=>O({keyType:"PRIMARY KEY",name:c.constraintName,columns:[{name:u,isActivated:i}],include:y(c.indexInclude||[],V),storageParameters:c.indexStorageParameters,comment:c.indexComment}),"hydratePrimaryKeyOptions"),C=n((c,u)=>Object.keys(u).find(i=>u[i].GUID===c),"findName"),$=n((c,u)=>a.get(Object.values(u).find(i=>i.GUID===c),"isActivated",!0),"checkIfActivated"),y=n((c,u)=>a.map(c,i=>({name:C(i.keyId,u.properties),isActivated:$(i.keyId,u.properties)})),"getKeys"),d=n(c=>Array.isArray(c.primaryKey)?c.primaryKey.map(u=>a.isEmpty(u.compositePrimaryKey)?{name:u.constraintName,errorMessage:"A primary key constraint cannot be created without any primary key selected"}:{...h(u,null,null,c),columns:y(u.compositePrimaryKey,c)}):[],"getCompositePrimaryKeys"),o=n((c,u)=>Array.isArray(c.uniqueKey)?c.uniqueKey.map(i=>a.isEmpty(i.compositeUniqueKey)?{name:i.constraintName,errorMessage:"A unique key constraint cannot be created without any unique key selected"}:{...K({options:i,columnName:null,isActivated:null,jsonSchema:c,dbVersion:u}),columns:y(i.compositeUniqueKey,c)}):[],"getCompositeUniqueKeys");return{getTableKeyConstraints:n((c,u)=>{if(!c.properties)return[];let i=I(c,([N,L])=>{if(!(!S(L)||b(L)))return h(a.first(L.primaryKeyOptions),N,L.isActivated,c)}).filter(Boolean),V=a.flatten(I(c,([N,L])=>!s(L)||f(L)?[]:(L.uniqueKeyOptions||[]).map(U=>K({options:U,columnName:N,isActivated:L.isActivated,jsonSchema:c,dbVersion:u})))).filter(Boolean);return[...i,...d(c),...V,...o(c,u)]},"getTableKeyConstraints"),isInlineUnique:f,isInlinePrimaryKey:b,getKeys:y,hydratePrimaryKeyOptions:h,hydrateUniqueOptions:K}}});var Qe=q((zt,Ze)=>{"use strict";Ze.exports=({_:a,templates:O,assignTemplates:I,getFunctionArguments:s,getNamePrefixedWithSchemaName:f,wrapComment:S})=>{let b=n((N,L)=>a.map(L,U=>{let l=U.functionOrReplace?" OR REPLACE":"",A=I(O.createFunction,{name:f(U.name,N),orReplace:l,parameters:s(U.functionArguments),returnType:U.functionReturnsSetOf?`SETOF ${U.functionReturnType}`:U.functionReturnType,language:U.functionLanguage,properties:K(U),definition:U.functionBody}),Y=U.functionDescription?I(O.comment,{object:"FUNCTION",objectName:f(U.name,N),comment:S(U.functionDescription)}):"";return[A,Y].filter(Boolean).join(`
`)}).join(`
`),"getFunctionsScript"),K=n(N=>{let L=n(U=>U?`	${U}
`:"","wrap");return[{key:"functionWindow",getValue:h},{key:"functionVolatility",getValue:C},{key:"functionLeakProof",getValue:$},{key:"functionNullArgs",getValue:y},{key:"functionSqlSecurity",getValue:d},{key:"functionParallel",getValue:o},{key:"functionExecutionCost",getValue:p},{key:"functionExecutionRows",getValue:c},{key:"functionSupportFunction",getValue:u},{key:"functionConfigurationParameters",getValue:i}].map(U=>L(U.getValue(N[U.key],N))).filter(Boolean).join("")},"getProperties"),h=n((N,L)=>L.language!=="c"||!N?"":"WINDOW","getWindow"),C=n(N=>N,"getVolatility"),$=n(N=>N?"LEAKPROOF":"NOT LEAKPROOF","getLeakProof"),y=n(N=>N,"getNullArgs"),d=n(N=>{if(N)return`SECURITY ${N}`},"getSqlSecurity"),o=n(N=>{if(N)return`PARALLEL ${N}`},"getParallel"),p=n(N=>{if(N)return`COST ${N}`},"getExecutionCost"),c=n((N,L)=>!N||!L.functionReturnsSetOf&&!V(L)?"":`ROWS ${N}`,"getExecutionRows"),u=n(N=>{if(N)return`SUPPORT ${N}`},"getSupportFunction"),i=n(N=>{if(N)return`SET ${N}`},"getConfigurationParameters"),V=n(N=>(N.functionReturnType||"").trim().toUpperCase().startsWith("TABLE"),"isFunctionReturnsTable");return{getFunctionsScript:b}}});var _e=q((Qt,Je)=>{"use strict";Je.exports=({_:a,templates:O,assignTemplates:I,getFunctionArguments:s,getNamePrefixedWithSchemaName:f})=>({getProceduresScript:n((b,K)=>a.map(K,h=>{let C=h.orReplace?" OR REPLACE":"";return I(O.createProcedure,{name:f(h.name,b),orReplace:C,parameters:s(h.inputArgs),language:h.language,body:h.body})}).join(`
`),"getProceduresScript")})});var tt=q((_t,et)=>{"use strict";et.exports=({_:a,getColumnsList:O,checkAllKeysDeactivated:I})=>{let s=n(($,y)=>$?" TEMPORARY":y?" UNLOGGED":"","getTableTemporaryValue"),f=n($=>{let y=n(o=>o?`${o}
`:"","wrap"),d=[{key:"inherits",getValue:h("INHERITS")},{key:"partitionBounds",getValue:h("")},{key:"partitioning",getValue:S},{key:"usingMethod",getValue:h("USING")},{key:"storage_parameter",getValue:C},{key:"on_commit",getValue:K},{key:"selectStatement",getValue:h("AS")}].map(o=>y(o.getValue($[o.key],$))).filter(Boolean).join("");return a.trim(d)?` ${a.trim(d)}`:""},"getTableOptions"),S=n(($,{isActivated:y})=>{if($&&$.partitionMethod){let o=b($,y)+` (${$.partitioning_expression})`;return`PARTITION BY ${$.partitionMethod}${o}`}},"getPartitioning"),b=n(($,y)=>{let d=I($.compositePartitionKey);return O($.compositePartitionKey,d,y)},"getPartitionKeys"),K=n(($,y)=>{if($&&y.temporary)return`ON COMMIT ${$}`},"getOnCommit"),h=n($=>y=>{if(y)return`${$} ${y}`},"getBasicValue"),C=n($=>{if(a.isEmpty($))return"";let y=["ttl_storage_parameters"],d=["id",...y];return a.chain($).toPairs().flatMap(([o,p])=>y.includes(o)?a.toPairs(p):[[o,p]]).reject(([o])=>a.includes(d,o)).map(([o,p])=>{if(!(!p&&p!==0))return`${o}=${p}`}).compact().join(`,
	`).trim().thru(o=>{if(o)return`WITH (
	${o}
)`}).value()},"getStorageParameters");return{getTableTemporaryValue:s,getTableOptions:f}}});var rt=q((tn,nt)=>{"use strict";nt.exports=({_:a,commentIfDeactivated:O,assignTemplates:I,templates:s,getNamePrefixedWithSchemaName:f,wrapComment:S})=>{let b=["composite","enum","range_udt","domain"],K=n((o,p)=>{let c=f(o.name,o.schemaName),u=I(s.comment,{object:"TYPE",objectName:c,comment:S(o.comment)});switch(o.type){case"composite":return I(s.createCompositeType,{name:c,columnDefinitions:a.join(p,`,
	`),comment:o.comment?u:""});case"enum":return I(s.createEnumType,{name:c,values:a.map(o.enum,i=>`'${i}'`).join(", "),comment:o.comment?u:""});case"range_udt":return I(s.createRangeType,{name:c,subtype:o.rangeSubtype,options:C(o),comment:o.comment?u:""});case"domain":{let i=I(s.comment,{object:"DOMAIN",objectName:c,comment:S(o.comment)});return I(s.createDomainType,{name:c,underlyingType:o.underlyingType,notNull:o.nullable?"":" NOT NULL",collate:o.collation?`
	COLLATE ${o.collation}`:"",default:o.default?`
	DEFAULT ${o.default}`:"",constraints:$(o),comment:o.comment?i:""})}default:return""}},"getPlainUdt"),h=n(o=>b.includes(o.type),"isNotPlainType"),C=n(o=>{let p=n(u=>u?`	${u}`:"","wrap"),c=[{key:"operatorClass",getValue:y("SUBTYPE_OPCLASS")},{key:"collation",getValue:y("COLLATION")},{key:"canonicalFunction",getValue:y("CANONICAL")},{key:"subtypeDiffFunction",getValue:y("SUBTYPE_DIFF")},{key:"multiRangeType",getValue:y("MULTIRANGE_TYPE_NAME")}].map(u=>p(u.getValue(o[u.key]))).filter(Boolean).join(`,
`);return a.trim(c)?`,
	`+a.trim(c):""},"getRangeOptions"),$=n(o=>a.map(o.checkConstraints,p=>p.name?`
	CONSTRAINT ${p.name} CHECK (${p.expression})`:`
	CHECK (${p.expression})`).join(""),"getDomainConstraints"),y=n(o=>p=>{if(p)return`${o}=${p}`},"getBasicValue");return{getUserDefinedType:n((o,p)=>O(K(o,p),{isActivated:o.isActivated}),"getUserDefinedType"),isNotPlainType:h}}});var ot=q((rn,at)=>{"use strict";at.exports=({_:a,wrapInQuotes:O,checkAllKeysDeactivated:I,getColumnsList:s})=>{let f=n(({name:C,sortOrder:$,nullsOrder:y,opclass:d})=>{let o=$?` ${$}`:"",p=y?` ${y}`:"",c=d?` ${d}`:"";return`${O(C)}${c}${o}${p}`},"mapIndexKey"),S=n((C=[],$)=>{let y=I(C);return s(C,y,$,f)},"getIndexKeys"),b=n((C,$)=>{var L;let y=s(C.include||[],I(C.include||[]),$),d=["btree"],o=C.using_hash&&d.includes(C.index_method)?" USING HASH":"",p=(L=C.include)!=null&&L.length?` INCLUDE ${a.trim(y)}`:"",c=C.partitioning_expression||"",u=K(C),i=u?` WITH (
	${u})`:"",V=C.where?` WHERE ${C.where}`:"",N=C.visibility?` ${C.visibility}`:"";return a.compact([" ",o,p,c,i,V,N]).join(`
`)},"getIndexOptions"),K=n(C=>{let $=["id"];return a.chain(C.index_storage_parameter).toPairs().map(([y,d])=>{if(!($.includes(y)||a.isNil(d)||d===""))return`${y}=${h(d)}`}).compact().join(`,
	`).value()},"getWithOptions"),h=n(C=>a.isBoolean(C)?C?"ON":"OFF":C,"getValue");return{getIndexKeys:S,getIndexOptions:b}}});var st=q((on,it)=>{"use strict";it.exports=({_:a,assignTemplates:O,templates:I,commentIfDeactivated:s,wrapComment:f,wrapInQuotes:S})=>{let b=n((l,A)=>`${l}(${A})`,"addLength"),K=n((l,A,Y)=>a.isNumber(Y)?`${l}(${A},${Y})`:`${l}(${A})`,"addScalePrecision"),h=n((l,A)=>a.isNumber(A)?`${l}(${A})`:l,"addPrecision"),C=n((l,A)=>A?`${l} ${A}`:l,"addWithTimezone"),$=n(({type:l,typeModifier:A,srid:Y})=>{let M=Y?`, ${Y}`:"";return A&&A!==""?`${l}(${A}${M})`:l},"addTypeModifier"),y=n((l,A)=>{let Y=(A==null?void 0:A.map(M=>`[${(M==null?void 0:M.array_size_limit)??""}]`).join("").trim())||"";return`${l}${Y}`},"addArrayDecorator"),d=n(l=>["char","varchar","bit","varbit"].includes(l),"canHaveLength"),o=n(l=>["numeric","decimal"].includes(l),"canHavePrecision"),p=n(l=>["time","timestamp"].includes(l),"canHaveTimePrecision"),c=n(l=>["numeric","decimal"].includes(l),"canHaveScale"),u=n(l=>["geography","geometry"].includes(l),"canHaveTypeModifier"),i=n((l,A)=>(d(l)&&a.isNumber(A.length)?l=b(l,A.length):o(l)&&c(l)&&a.isNumber(A.precision)?l=K(l,A.precision,A.scale):o(l)&&a.isNumber(A.precision)?l=h(l,A.precision):u(l)?l=$({type:l,typeModifier:A.typeModifier,srid:A.srid}):p(l)&&(a.isNumber(A.timePrecision)||A.timezone)&&(l=C(h(l,A.timePrecision),A.timezone)),y(l,A.array_type)),"decorateType"),V=n(l=>["char","varchar","text","bit","varbit"].includes(l),"isString"),N=n(l=>["date","time","timestamp","interval"].includes(l),"isDateTime");return{decorateType:i,decorateDefault:n((l,A,Y)=>{let M=["current_timestamp","current_user","null"];return(V(l)||N(l))&&!M.includes(a.toLower(A))&&!Y?f(A):A},"decorateDefault"),getColumnComments:n((l,A)=>a.chain(A).filter("comment").map(Y=>{let M=O(I.comment,{object:"COLUMN",objectName:`${l}.${S(Y.name)}`,comment:f(Y.comment)});return s(M,Y)}).join(`
`).value(),"getColumnComments")}}});var ut=q((cn,mt)=>{"use strict";var ht=Pe(),ct=Fe(),E=Ve();mt.exports=(a,O,I)=>{let s=I.require("lodash"),{tab:f,commentIfDeactivated:S,checkAllKeysDeactivated:b,divideIntoActivatedAndDeactivated:K,hasType:h,wrap:C,clean:$,wrapComment:y,getFunctionArguments:d,wrapInQuotes:o,getNamePrefixedWithSchemaName:p,getColumnsList:c,getViewData:u}=oe()(s),i=He(),{joinActivatedAndDeactivatedStatements:V}=Ge(),{generateConstraintsString:N,foreignKeysToString:L,foreignActiveKeysToString:U,createKeyConstraint:l,getConstraintsWarnings:A,additionalPropertiesForForeignKey:Y}=je()({_:s,commentIfDeactivated:S,checkAllKeysDeactivated:b,assignTemplates:i,getColumnsList:c,wrapInQuotes:o}),M=ze()(s,$),{getFunctionsScript:W}=Qe()({_:s,templates:E,assignTemplates:i,getFunctionArguments:d,getNamePrefixedWithSchemaName:p,wrapComment:y}),{getProceduresScript:me}=_e()({_:s,templates:E,assignTemplates:i,getFunctionArguments:d,getNamePrefixedWithSchemaName:p}),{getTableTemporaryValue:ue,getTableOptions:ie}=tt()({_:s,checkAllKeysDeactivated:b,getColumnsList:c}),{getUserDefinedType:Se,isNotPlainType:r}=rt()({_:s,commentIfDeactivated:S,assignTemplates:i,templates:E,getNamePrefixedWithSchemaName:p,wrapComment:y}),{getIndexKeys:T,getIndexOptions:R}=ot()({_:s,wrapInQuotes:o,checkAllKeysDeactivated:b,getColumnsList:c}),{decorateType:F,decorateDefault:D,getColumnComments:pe}=st()({_:s,wrap:C,assignTemplates:i,templates:E,commentIfDeactivated:S,wrapInQuotes:o,wrapComment:y});return{createDatabase(e){if(!e.databaseName)return"";let{collate:t,characterClassification:m}=e;return i(E.createDatabase,{name:o(e.databaseName),template:e.template?`
	TEMPLATE ${e.template}`:"",encoding:e.encoding?`
	ENCODING = '${e.encoding}'`:"",collate:t?`
	LC_COLLATE = '${e.collate}'`:"",characterClassification:m?`
	LC_CTYPE = '${m}'`:""})},createSchema({schemaName:e,ifNotExist:t,comments:m,udfs:g,procedures:P}){let B=i(E.comment,{object:"SCHEMA",objectName:o(e),comment:y(m)}),k=i(E.createSchema,{name:o(e),ifNotExist:t?" IF NOT EXISTS":"",comment:m?B:""}),v=W(e,g),H=me(e,P);return s.chain([k,v,H]).compact().map(s.trim).join(`

`).trim().value()},createTable({name:e,columns:t,checkConstraints:m,foreignKeyConstraints:g,schemaData:P,columnDefinitions:B,keyConstraints:k,inherits:v,description:H,ifNotExist:G,usingMethod:X,on_commit:x,partitioning:j,storage_parameter:Q,temporary:J,unlogged:Z,selectStatement:_,partitionOf:w,partitionBounds:te},ee){let se=G?" IF NOT EXISTS":"",ae=p(e,P.schemaName),ce=i(E.comment,{object:"TABLE",objectName:ae,comment:y(H)}),z=K(k.filter(({errorMessage:re})=>!re).map(l(E,ee)),re=>re.statement),le=A(k.filter(({errorMessage:re})=>re)),ne=`${N(z,ee)}${le}`,fe=w?ne==null?void 0:ne.slice(1):ne,pt=K(g,re=>re.statement),Le=N(pt,ee),lt=`
`+pe(ae,B),dt=w?E.createTablePartitionOf:E.createTable,Tt=w&&!ne?`
	`:`,
	`,be=s.isEmpty(m)?"":C(s.join(m,`,
	`),Tt,""),he=w&&!fe&&!be&&!Le,gt=he?"":"(",Et=he?"":")",yt=V({statements:t,indent:`
	`}),Nt=i(dt,{temporary:ue(J,Z),ifNotExist:se,name:ae,columnDefinitions:w?"":"	"+yt,keyConstraints:fe,checkConstraints:be,foreignKeyConstraints:Le,options:ie({inherits:v,partitioning:j,usingMethod:X,on_commit:x,storage_parameter:Q,selectStatement:_,partitionBounds:te}),comment:H?ce:"",partitionOf:w?` PARTITION OF ${w} `:"",columnDescriptions:lt,openParenthesis:gt,closeParenthesis:Et});return S([Nt].map(s.trim).join(`

`).trim()+`
`,{isActivated:ee})},convertColumnDefinition(e){let t=e.nullable?"":" NOT NULL",m=e.primaryKey?" "+l(E,!0)(e.primaryKeyOptions).statement:"",g=e.unique?" "+l(E,!0)(e.uniqueKeyOptions).statement:"",P=e.collationRule?` COLLATE "${e.collationRule}"`:"",B=Array.isArray(e.array_type)&&e.array_type.length>0,k=s.isUndefined(e.default)?"":" DEFAULT "+D(e.type,e.default,B),v=e.dbVersion>=12&&e.generatedColumn&&e.columnGenerationExpression?i(E.generatedColumnClause,{generationExpression:e.columnGenerationExpression}):"";return S(i(E.columnDefinition,{name:o(e.name),type:F(e.type,e),generatedColumnClause:v,notNull:t,primaryKey:m,uniqueKey:g,collation:P,defaultValue:k}),{isActivated:e.isActivated})},createIndex(e,t,m,g=!0){let P=t.unique&&t.index_method==="btree",B=o(t.indxName),k=P?" UNIQUE":"",v=t.concurrently?" CONCURRENTLY":"",H=t.ifNotExist?" IF NOT EXISTS":"",G=t.index_method?` USING ${s.toUpper(t.index_method)}`:"",X=T(t.index_method==="btree"?t.columns:s.map(t.columns,j=>s.omit(j,"sortOrder","nullsOrder")),g),x=R(t,g);return S(i(E.index,{unique:k,concurrently:v,ifNotExist:H,name:B,using:G,keys:X,options:x,tableName:p(e,t.schemaName)}),{isActivated:t.isActivated})},createCheckConstraint(e){return i(E.checkConstraint,{name:e.name?`CONSTRAINT ${o(e.name)}`:"",expression:s.trim(e.expression).replace(/^\(([\s\S]*)\)$/,"$1"),notValid:e.notValid?" NOT VALID":""})},createForeignKeyConstraint({name:e,foreignKey:t,primaryTable:m,primaryKey:g,primaryTableActivated:P,foreignTableActivated:B,foreignSchemaName:k,primarySchemaName:v,customProperties:H,isActivated:G},X,x){let j=b(g),Q=b(t),J=!j&&!Q&&P&&B,{foreignOnDelete:Z,foreignOnUpdate:_,foreignMatch:w}=Y(H),te=i(E.createForeignKeyConstraint,{primaryTable:p(m,v||x.schemaName),name:e?`CONSTRAINT ${o(e)}`:"",foreignKey:J?L(t):U(t),primaryKey:J?L(g):U(g),onDelete:Z?` ON DELETE ${Z}`:"",onUpdate:_?` ON UPDATE ${_}`:"",match:w?` MATCH ${w}`:""});return{statement:s.trim(te),isActivated:J&&G}},createForeignKey({name:e,foreignTable:t,foreignKey:m,primaryTable:g,primaryKey:P,primaryTableActivated:B,foreignTableActivated:k,foreignSchemaName:v,primarySchemaName:H,customProperties:G,isActivated:X},x,j){let Q=b(P),J=b(m),Z=!Q&&!J&&B&&k,{foreignOnDelete:_,foreignOnUpdate:w,foreignMatch:te}=Y(G),ee=i(E.createForeignKey,{primaryTable:p(g,H||j.schemaName),foreignTable:p(t,v||j.schemaName),name:e?o(e):"",foreignKey:Z?L(m):U(m),primaryKey:Z?L(P):U(P),onDelete:_?` ON DELETE ${_}`:"",onUpdate:w?` ON UPDATE ${w}`:"",match:te?` MATCH ${te}`:""});return{statement:s.trim(ee),isActivated:Z&&X}},createView(e,t,m){var ee,se,ae,ce;let g=p(e.name,e.schemaName),P=i(E.comment,{object:"VIEW",objectName:g,comment:y(e.comment)}),k=b(e.keys||[])||!m,{columns:v,tables:H}=u(e.keys),G=v.map(z=>z.statement).join(`,
		`);if(!k){let z=K(v,ne=>ne.statement),le=z.deactivatedItems.length?S(z.deactivatedItems.join(`,
		`),{isActivated:!1,isPartOfLine:!0}):"";G=z.activatedItems.join(`,
		`)+le}let X=s.trim(e.selectStatement)?s.trim(f(e.selectStatement)):i(E.viewSelectStatement,{tableName:H.join(", "),keys:G}),x=(ee=e.viewOptions)!=null&&ee.check_option?`check_option=${(se=e.viewOptions)==null?void 0:se.check_option}`:"",j=(ae=e.viewOptions)!=null&&ae.security_barrier?"security_barrier":"",Q=15,{getDbVersion:J}=oe()(s),Z=(ce=e.viewOptions)!=null&&ce.security_invoker&&J(t.dbVersion)>=Q?"security_invoker":"",_=x||j||Z?`
	WITH (${s.compact([x,j,Z]).join(",")})`:"",w=n(z=>z.withCheckOption&&z.checkTestingScope?`
	WITH ${z.checkTestingScope} CHECK OPTION`:z.withCheckOption?`
	WITH CHECK OPTION`:"","getCheckOption");return[S(i(E.createView,{name:g,orReplace:e.orReplace?" OR REPLACE":"",temporary:e.temporary?" TEMPORARY":"",checkOption:w(e),comment:e.comment?P:"",withOptions:_,selectStatement:X}),{isActivated:!k})].map(s.trim).join(`

`).trim()+`
`},dropView(e){let t={viewName:e};return i(E.dropView,t)},createViewIndex(){return""},createUdt(e){let t=s.map(e.properties,this.convertColumnDefinition);return Se(e,t)},getDefaultType(e){return ht[e]},getTypesDescriptors(){return ct},hasType(e){return h(ct,e)},hydrateDatabase({modelData:e}){return e=s.get(e,"0",{}),{databaseName:e.database_name,encoding:e.encoding,template:e.template,collate:e.LC_COLLATE,characterClassification:e.LC_CTYPE,dbVersion:e.dbVersion}},hydrateColumn({columnDefinition:e,jsonSchema:t,schemaData:m,definitionJsonSchema:g={},parentJsonSchema:P}){let B=s.includes(["char","varchar","text"],e.type)?t.collationRule:"",k=["time","timestamp"],v=s.includes(k,e.type)?t.timePrecision:"",H=s.includes(k,e.type)?t.timezone:"",G=e.type==="interval"?t.intervalOptions:"",{getDbVersion:X}=oe()(s),x=X(m.dbVersion),j=s.omit(M.hydratePrimaryKeyOptions(s.first(t.primaryKeyOptions)||{},e.name,e.isActivated,P),"columns"),Q=s.omit(M.hydrateUniqueOptions({options:s.first(t.uniqueKeyOptions)||{},columnName:e.name,isActivated:e.isActivated,jsonSchema:P,dbVersion:x}),"columns");return{name:e.name,type:e.type,primaryKey:M.isInlinePrimaryKey(t),primaryKeyOptions:j,unique:M.isInlineUnique(t),uniqueKeyOptions:Q,nullable:e.nullable,default:e.default,comment:t.refDescription||t.description||g.description,isActivated:e.isActivated,scale:e.scale,precision:e.precision,length:e.length,enum:t.enum,array_type:t.array_type,unit:t.unit,rangeSubtype:t.rangeSubtype,operatorClass:t.operatorClass,collation:t.collation,canonicalFunction:t.canonicalFunction,subtypeDiffFunction:t.subtypeDiffFunction,multiRangeType:t.multiRangeType,schemaName:m.schemaName,underlyingType:t.underlyingType,checkConstraints:t.checkConstraints,typeModifier:t.typeModifier,srid:t.srid,collationRule:B,timePrecision:v,timezone:H,intervalOptions:G,dbVersion:x,generatedColumn:!!t.generatedColumn,columnGenerationExpression:t.columnGenerationExpression}},hydrateJsonSchemaColumn(e,t){return!e.$ref||s.isEmpty(t)||r(t)?e:(e=s.omit(e,"$ref"),{...t,...e})},hydrateIndex(e,t,m){return{...e,schemaName:m.schemaName}},hydrateViewIndex(e){return{}},hydrateCheckConstraint(e){return{name:e.chkConstrName,expression:e.constrExpression,notValid:e.notValid}},hydrateSchema(e,t){let m=s.get(t,"modelData.0.dbVersion");return{schemaName:e.name,ifNotExist:e.ifNotExist,comments:e.description,udfs:(t==null?void 0:t.udfs)||[],procedures:(t==null?void 0:t.procedures)||[],dbVersion:m}},hydrateTable({tableData:e,entityData:t,jsonSchema:m}){let g=t[0],P=s.chain(g.inherits).map(({parentTable:x})=>s.get(e,`relatedSchemas[${x}]`,"")).compact().map(x=>x.code||x.collectionName).join(", ").thru(x=>x?`(${x})`:"").value(),B=s.first(g.partitioning)||{},k=M.getKeys(B.compositePartitionKey,m),v=s.get(e,`relatedSchemas[${g.partitionOf}]`),H=v?p(v.collectionName,v.bucketName):"",{getDbVersion:G}=oe()(s),X=G(s.get(e,"dbData.dbVersion",""));return{...e,partitionOf:H,keyConstraints:M.getTableKeyConstraints(m,X),inherits:P,selectStatement:s.trim(g.selectStatement),partitioning:s.assign({},B,{compositePartitionKey:k}),...s.pick(g,"temporary","unlogged","description","ifNotExist","usingMethod","on_commit","storage_parameter","partitionBounds")}},hydrateViewColumn(e){return{name:e.name,tableName:e.entityName,alias:e.alias,isActivated:e.isActivated,dbName:e.dbName}},hydrateView({viewData:e,entityData:t,relatedSchemas:m}){let g=t[0];return{name:e.name,keys:e.keys,comment:g.description,orReplace:g.orReplace,temporary:g.temporary,recursive:g.recursive,viewOptions:g.viewOptions,selectStatement:g.selectStatement,withCheckOption:g.withCheckOption,checkTestingScope:g.withCheckOption?g.checkTestingScope:"",schemaName:e.schemaData.schemaName}},commentIfDeactivated(e,t,m){return e},alterColumnType(e,t,m,g){let P=m;return g.length?P+=`(${g.length})`:g.precision&&g.scale?P+=`(${g.precision},${g.scale})`:g.precision&&(P+=`(${g.precision})`),i(E.alterColumnType,{tableName:e,columnName:t,dataType:P})},setNotNullConstraint(e,t){return i(E.addNotNullConstraint,{tableName:e,columnName:t})},dropNotNullConstraint(e,t){return i(E.dropNotNullConstraint,{tableName:e,columnName:t})},renameColumn(e,t,m){return i(E.renameColumn,{tableName:e,oldColumnName:t,newColumnName:m})},addCheckConstraint(e,t,m){let g={tableName:e,constraintName:t,expression:m};return i(E.addCheckConstraint,g)},dropConstraint(e,t){let m={tableName:e,constraintName:t};return i(E.dropConstraint,m)},updateTableComment(e,t){let m={tableName:e,comment:t};return i(E.updateCommentOnTable,m)},dropTableComment(e){let t={tableName:e,comment:"NULL"};return i(E.updateCommentOnTable,t)},updateColumnComment(e,t){let m={columnName:e,comment:t};return i(E.updateCommentOnColumn,m)},dropColumnComment(e){let t={columnName:e,comment:"NULL"};return i(E.updateCommentOnColumn,t)},updateSchemaComment(e,t){let m={schemaName:e,comment:t};return i(E.updateCommentOnSchema,m)},dropSchemaComment(e){let t={schemaName:e,comment:"NULL"};return i(E.updateCommentOnSchema,t)},updateViewComment(e,t){let m={viewName:e,comment:t};return i(E.updateCommentOnView,m)},dropViewComment(e){let t={viewName:e,comment:"NULL"};return i(E.updateCommentOnView,t)},createSchemaOnly(e){let t={schemaName:e};return i(E.createSchemaOnly,t)},dropSchema(e){let t={schemaName:e};return i(E.dropSchema,t)},dropTable(e){let t={tableName:e};return i(E.dropTable,t)},addColumn(e,t){let m={tableName:e,columnDefinition:t};return i(E.addColumn,m)},dropColumn(e,t){let m={tableName:e,columnName:t};return i(E.dropColumn,m)},dropDomain(e){let t={udtName:e};return i(E.dropDomain,t)},dropType(e){let t={udtName:e};return i(E.dropType,t)},alterTypeAddAttribute(e,t){let m={udtName:e,columnDefinition:t};return i(E.alterTypeAddAttribute,m)},alterTypeDropAttribute(e,t){let m={udtName:e,attributeName:t};return i(E.alterTypeDropAttribute,m)},alterTypeRenameAttribute(e,t,m){let g={udtName:e,oldAttributeName:t,newAttributeName:m};return i(E.alterTypeRenameAttribute,g)},alterTypeChangeAttributeType(e,t,m){let g={udtName:e,attributeName:t,newDataType:m};return i(E.alterTypeChangeAttributeType,g)},dropForeignKey(e,t){let m={tableName:e,fkConstraintName:t};return i(E.dropForeignKey,m)},createKeyConstraint(e,t,m){let g=l(E,t)(m);return{statement:i(E.addPkConstraint,{constraintStatement:(g.statement||"").trim(),tableName:e}),isActivated:g.isActivated}},dropPkConstraint(e,t){let m={tableName:e,constraintName:t};return i(E.dropConstraint,m)}}}});module.exports=ut();
